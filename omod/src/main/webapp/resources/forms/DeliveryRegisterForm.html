<htmlform formUuid="3a9299e5-25b6-4489-9878-0cdfba06fba1" formName="Delivery register" formEncounterType="7daccd30-d04c-4215-b71e-97b8af8b3af3" formVersion="1.0">
<style>
        .section {
            border: 1px solid $headerColor;
            padding: 2px;
            text-align: left;
            margin-bottom: 1em;
        }
        .sectionHeader {
            background-color: #2f1c55;
            color: white;
            /* display: block; */
            padding: 2px;
            font-weight: bold;
        }
        table tr:nth-child(even) {
            background: #ffffff;
        }
        .alnright{
            text-align: right;
            color:#000000;
            width: 25%;
        }
        .alnright_i{
            text-align: right;
            color:#000000;
            width: 40%;
        }
        .alnleft{
            text-align: left;
            color:#000000;
            width: 25%;
        }
        td {
            border: none;
        }
        table th, table td {
            padding: 5px 10px;
            border: None;
        }
        .legend_style {
            max-width: 35%;
            background: #FAFAFA;
        <!--padding: 5px;-->
            margin: 0px left;
            box-shadow: 1px 1px 25px rgba(0,0,0,0.10);
            border-radius: 2px;
            border: 1px solid #305a72;
            border-bottom-left-radius: 2px;
            text-transform:initial;

        }
        form fieldset, .form fieldset {
            min-width: 98%;
            border: none;
            border-top: 1px solid #305a72;

        }
        table th, table td {
            padding: 5px 10px;
            /* border: 1px solid #DDD; */
        }
        table tr {
            border: None;
        }
        ul.select, .form input, .form select, .form textarea, .form ul.select {
            padding: 2px 10px;
        }
        form input, form select, form textarea, form ul.select, .form input, .form select, .form textarea, .form ul.select {
            padding: 2px 10px;
            min-width: 180px;
        }
        form select, .form select {
            max-width: 200px;
            min-width: 180px;
        }
        body {
            font-family: "OpenSans", Arial, sans-serif;
            color: #363463;
            font-size: 14px;
        }
        <!--table.baseline-aligned td {-->
            <!--vertical-align: baseline;-->
            <!--}-->
    </style>
    <script type="text/javascript">

        var $ = jQuery;
        $(document).ready(function ()
        {
            $('.hasDatepicker').attr('readonly', true);
            $('#birthStatus1').attr('readonly', true);
            $('#childBirth').change(function (e) {
                console.log("Called: "+getValue('childBirth.value'));
                switch (getValue('childBirth.value')) {
                    case "165643":
                        console.log(1);
                        $('#birthStatus1').show();
                        $('#birthStatus2').hide();
                        $('#birthStatus3').hide();
                        $('#birthStatus4').hide();
                        $('#birthStatus5').hide();
                        $('#birthStatus6').hide();
                        $('#birthStatus7').hide();
                        break;
                    case "165644":
                        console.log(1);
                        $('#birthStatus1').show();
                        $('#birthStatus2').show();
                        $('#birthStatus3').hide();
                        $('#birthStatus4').hide();
                        $('#birthStatus5').hide();
                        $('#birthStatus6').hide();
                        $('#birthStatus7').hide();
                        break;
                    case "165645":
                        console.log(1);
                        $('#birthStatus1').show();
                        $('#birthStatus2').show();
                        $('#birthStatus3').show();
                        $('#birthStatus4').hide();
                        $('#birthStatus5').hide();
                        $('#birthStatus6').hide();
                        $('#birthStatus7').hide();
                        break;
                    case "165646":
                        console.log(1);
                        $('#birthStatus1').show();
                        $('#birthStatus2').show();
                        $('#birthStatus3').show();
                        $('#birthStatus4').show();
                        $('#birthStatus5').hide();
                        $('#birthStatus6').hide();
                        $('#birthStatus7').hide();
                        break;
                    case "165647":
                        console.log(1);
                        $('#birthStatus1').show();
                        $('#birthStatus2').show();
                        $('#birthStatus3').show();
                        $('#birthStatus4').show();
                        $('#birthStatus5').show();
                        $('#birthStatus6').hide();
                        $('#birthStatus7').hide();
                        break;
                    case "165648":
                        console.log(1);
                        $('#birthStatus1').show();
                        $('#birthStatus2').show();
                        $('#birthStatus3').show();
                        $('#birthStatus4').show();
                        $('#birthStatus5').show();
                        $('#birthStatus6').show();
                        $('#birthStatus7').hide();
                        break;
                    case "165649":
                        console.log(1);
                        $('#birthStatus1').show();
                        $('#birthStatus2').show();
                        $('#birthStatus3').show();
                        $('#birthStatus4').show();
                        $('#birthStatus5').show();
                        $('#birthStatus6').show();
                        $('#birthStatus7').show();
                        break;
                    default:
                        $('#birthStatus1').hide();
                        $('#birthStatus2').hide();
                        $('#birthStatus3').hide();
                        $('#birthStatus4').hide();
                        $('#birthStatus5').hide();
                        $('#birthStatus6').hide();
                        $('#birthStatus7').hide();
                }

            });

        });
    </script>
 
    <table style="margin-bottom: 20px;">
        <thead>
        <tr><th colspan='5' style="text-align: center">Delivery Informtation</th></tr>
        </thead>
    </table>
    <fieldset>
        <table class="table" width="100%">

            <tr>
                <td class="alnright_s"> Date of delivery</td>
                <td style="width:13%"><encounterDate default="now" showTime="false"/></td>
                <td class="alnright_s">Time of HIV diagnosis</td>
                <td style="width:13%">
                    <obs id="dia" conceptId="164851" answerConceptIds="166026,165825,165826,165475"
                         answerLabels="ANC,L&amp;D Booked,L&amp;D Unbooked,Previously known HIV+">
                        <controls>
                            <when value="164850" thenDisplay="#labour"/>
                        </controls>
                    </obs>
                </td>
                <td id="labour" class="alnright_s">
                    <table>
                        <tr>
                            <td>Labour</td>
                            <td><obs id="dia" conceptId="5630" answerConceptIds="165825,165826" answerLabels="1. Booked,2. Unbooked"/></td>
                        </tr>
                    </table>
                </td>
                <td class="alnright_s"></td>

            </tr>
        </table>
        <table class="table" width="100%">
            <tr>
                <td class="alnright_s">GA (wks) at birth</td>
                <td class="left"><obs conceptId="1409"/></td>
                <td class="alnright_s">Hepatitis B status</td>
                <td class="value"><obs conceptId="159430" answerConceptIds="703,664" answerLabels="Positive,Negative"/></td>
                <td class="alnright_s">Hepatitis C status</td>
                <td class="value"><obs conceptId="161471" answerConceptIds="703,664" answerLabels="Positive,Negative"/></td>

            </tr>
        </table>
    </fieldset>
    <fieldset>
        <table class="table" width="100%">
            <tr>
                <td class="alnright">Currently taking ART</td>
                <td>
                    <obs conceptId="160119" answerConceptIds="1066,1065" answerLabels="No,Yes"/>
                </td>

                <td class="alnright">ART started in labour &amp; delivery ward</td>
                <td>
                    <obs conceptId="165563" answerConceptIds="1066,1065" answerLabels="No,Yes"/>
                </td>
            </tr>
        </table>
    </fieldset>
    <fieldset>
        <table class="table" width="100%">
            <tr>
                <td class="alnright">Rupture of Membrane delivery interval</td>
                <td><obs conceptId="165479"/></td>
                <td class="alnright">Mode of delivery</td>
                <td>
                    <obs id="vd" conceptId="5630" answerConceptIds="1170,1171,159739"
                         answerLabels="Vaginal,Elective CS, Emergency CS">
                        <controls><when value="1170" thenDisplay="#vaginal"/>
                        </controls></obs>
                </td>
            </tr>
            <tr  id="vaginal">
                <td class="alnright">Episiotomy done?</td>
                <td><obs conceptId="5577"  answerConceptIds="1066,1065" answerLabels="No,Yes" style="yes_no_dropdown"/></td>
                <td class="alnright">Vaginal tear</td>
                <td><obs conceptId="165929" answerConceptIds="1066,1065" answerLabels="No,Yes"/></td>
            </tr>
            <tr>
                <td class="alnright">Feeding decision</td>
                <td><obs conceptId="985" answerConceptIds="5526,164857" answerLabels="EBF,ERF"/></td>
                <td class="alnright">Maternal outcome</td>
                <td><obs conceptId="160085" answerConceptIds="160429,134612" answerLabels="Alive,Dead"/></td>
            </tr>

            <tr>
                <td width="13%">Number of Child Birth</td>
                <td width="13%">
                    <obs id="childBirth" conceptId="165708" answerConceptIds="165643,165644,165645,165646,165647,165648,165649"
                         answerLabels="1,2,3,4,5,6,7">
                        <controls>
                            <when value="165643"  thenDisplay=".birthStatus1"/>
                            <when value="165644"  thenDisplay=".birthStatus2"/>
                            <when value="165645"  thenDisplay=".birthStatus3"/>
                            <when value="165646"  thenDisplay=".birthStatus4"/>
                            <when value="165647"  thenDisplay=".birthStatus5"/>
                            <when value="165648"  thenDisplay=".birthStatus6"/>
                            <when value="165649"  thenDisplay=".birthStatus7"/>
                        </controls>
                    </obs>
                </td>
            </tr>
        </table>
        <table class="birthStatus1,birthStatus2,birthStatus3,birthStatus4,birthStatus5,birthStatus6,birthStatus7,table" width="100%">
            <tr id="birthStatus1">

                    <td >Child Outcome 1</td>
                    <td >
                        <obs conceptId="164968" class="childNum" answerConceptIds="160429,154223,125872" answerLabels="Alive,Neonatal death,StillBirth"/>
                    </td>
            </tr>
            <tr id="birthStatus2">
                    <td >Child Outcome 2</td>
                    <td >
                        <obs conceptId="164968" class="childNum" answerConceptIds="160429,154223,125872" answerLabels="Alive,Neonatal death,StillBirth"/>
                    </td>
            </tr>
            <tr id="birthStatus3">
                    <td >Child Outcome 3</td>
                    <td >
                        <obs conceptId="164968" class="childNum" answerConceptIds="160429,154223,125872" answerLabels="Alive,Neonatal death,StillBirth"/>
                    </td>

            </tr >
            <tr id="birthStatus4">
                    <td >Child Outcome 4</td>
                    <td >
                        <obs conceptId="164968" class="childNum" answerConceptIds="160429,154223,125872" answerLabels="Alive,Neonatal death,StillBirth"/>
                    </td>

            </tr>
            <tr id="birthStatus5">
                    <td >Child Outcome 5</td>
                    <td >
                        <obs conceptId="164968" class="childNum" answerConceptIds="160429,154223,125872" answerLabels="Alive,Neonatal death,StillBirth"/>
                    </td>

            </tr>
            <tr id="birthStatus6">
                    <td >Child Outcome 6</td>
                    <td >
                        <obs conceptId="164968" class="childNum" answerConceptIds="160429,154223,125872" answerLabels="Alive,Neonatal death,StillBirth"/>
                    </td>

            </tr>
            <tr id="birthStatus7">
                    <td >Child Outcome 7</td>
                    <td >
                        <obs conceptId="164968" class="childNum" answerConceptIds="160429,154223,125872" answerLabels="Alive,Neonatal death,StillBirth"/>
                    </td>

            </tr>
        </table>
    </fieldset>

    <!-- UPDATED -->
    <fieldset>
        <legend class="legend_style">Key Population</legend>
        <table width="100%" border="0">
		<td>
		<table >
			<td>
				<tr>
					<td class="alnleft_s">KP</td>
					<td>
						<obs id="key_pop" style="yes_no_dropdown" conceptId="166284">
							<controls>
								<when value="true" thenDisplay="#key_pop_type" />
							</controls>
						</obs>
					</td>
				</tr>
			</td>
			</table>		
		</td>

		<td>
			<table class="table" width="100%" id="key_pop_type">
				<includeIf velocityTest="$patient.gender == 'F' ">
					<tr>
						<td>FSW <obs conceptId="166369" answerConceptId="166285" answerLabel="" /></td>
					</tr>
				</includeIf>
				
				<includeIf velocityTest="$patient.gender == 'M' ">
					<tr>
						<td>MSM <obs conceptId="166369" answerConceptId="160578" answerLabel="" /></td>
					</tr>
				</includeIf>
				<tr>
					<td>PWID <obs conceptId="166369" answerConceptId="166286" answerLabel="" /></td>
				</tr>
				<tr>
					<td>TG <obs conceptId="166369" answerConceptId="166287" answerLabel="" /></td>
				</tr>
				<tr>
					<td>People in prisons and other enclosed settings <obs conceptId="166369" answerConceptId="162277" answerLabel="" /></td>
				</tr>
			</table>
        </td>
		</table>
    </fieldset>


    <fieldset>
        <legend class="legend_style">Signature</legend>
        <table width="100%">
            <tr>
                <td class="alnright_s">Visit Date:</td>
                <td class="alnleft_s">
                    <encounterDate default="now" id="encounter_Date " showTime="false" allowFutureDates="false"/>
                </td>
                <td class="alnright_s">Enrolled by:</td>
                <td class="alnleft_s">
                    <encounterProvider />
                </td>
                <td class="alnright_s">Facility:</td>
                <td>
                    <encounterLocation default="SessionAttribute:emrContext.sessionLocationId"/>
                </td>
            </tr>
        </table>
    </fieldset>
    <submit/>
</htmlform>