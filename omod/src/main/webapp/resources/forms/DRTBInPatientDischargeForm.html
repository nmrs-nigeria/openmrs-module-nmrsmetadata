<htmlform formUuid="3af3f492-21e5-4a4a-87c9-0f2dae364ec2" formName="DR-TB In-Patient Discharge Form"
          formEncounterType="be400d24-f75f-453a-baf2-c5c3e555ec0f" formVersion="1.0">
    <!-- Autogenerated example form  (template from 01-Nov-2010 -->
    <macros>
        paperFormId = (Fill this in)
        headerColor =#009d8e
        fontOnHeaderColor = white
    </macros>

    <style>
        .section {
            border: 1px solid $ headerColor;
            padding: 2px;
            text-align: left;
            margin-bottom: 1em;
        }

        .sectionHeader {
            background-color: #2f1c55;
            color: white;
            /* display: block; */
            padding: 2px;
            font-weight: bold;
        }

        table tr:nth-child(even) {
            background: #ffffff;
        }

        .alnright {
            text-align: right;
            color: #000000;
            width: 25%;
        }

        .alnright_s {
            text-align: right;
            color: #000000;
            width: 13%;
        }

        .alnleft_s {
            text-align: left;
            color: #000000;
            width: 13%;
        }

        .alnleft_f {
            text-align: left;
            color: #000000;
            width: 20%;
        }

        .alnleft_f1 {
            text-align: left;
            color: #000000;
            width: 20%;
        }

        .alnleft_ns {
            text-align: left;
            color: #000000;
            width: 13%;
        }

        .alnleft {
            text-align: left;
            color: #000000;
            width: 25%;
        }

        .error {
            color: red;
        }

        td {
            border: none;
        }

        table th, table td {
            padding: 5px 10px;
            border: None;
        }

        .legend_style {
            max-width: 35%;
            background: #FAFAFA;
            /*   padding: 5px; */
            margin: 20px left;
            box-shadow: 1px 1px 25px rgba(0, 0, 0, 0.10);
            border-radius: 2px;
            border: 1px solid #305a72;
            border-bottom-left-radius: 2px;
            margin-bottom: 20px;
            text-transform: initial;
        }

        form fieldset, .form fieldset {
            min-width: 98%;
            border: none;
            border-top: 1px solid #305a72;
            margin-bottom: 20px;


        }

        table th, table td {
            padding: 5px 10px;
            /* border: 1px solid #DDD; */
        }

        table tr {
            border: None;
        }

        ul.select, .form input, .form select, .form textarea, .form ul.select {
            padding: 2px 10px;
        }

        form input, form select, form textarea, form ul.select, .form input, .form select, .form textarea, .form ul.select {
            padding: 2px 10px;
        }

        form select, .form select {
            max-width: 200px;
            min-width: 150px;
        }

        .standard {
            max-width: 200px;
            min-width: 150px;
        }

        body {
            font-family: "OpenSans", Arial, sans-serif;
            color: #363463;
            font-size: 14px;
        }

        /* table.baseline-aligned td {
            vertical-align: baseline;
            } */
    </style>

    <script type="text/javascript">


        var $ = jQuery;

        $(document).ready(function () {

            document.querySelector('#phoneval1').children[0].addEventListener('keyup', function (e) {
                e.preventDefault();
                let phone = document.querySelector('#phoneval1').children[0].value;
                if (!validatePhoneNumber(phone))
                    getField('phoneval1.error').html('REMINDER: Please, ensure you enter a valid 11 digits phone number').show();

                else
                    getField('phoneval1.error').html('REMINDER: Please, ensure you enter a valid 11 digits phone number').hide();

            });

            document.querySelector('#phoneval2').children[0].addEventListener('keyup', function (e) {
                e.preventDefault();
                let phone = document.querySelector('#phoneval2').children[0].value;
                if (!validatePhoneNumber(phone))
                    getField('phoneval2.error').html('REMINDER: Please, ensure you enter a valid 11 digits phone number').show();

                else
                    getField('phoneval2.error').html('REMINDER: Please, ensure you enter a valid 11 digits phone number').hide();

            });


            document.querySelector('#phoneval3').children[0].addEventListener('keyup', function (e) {
                e.preventDefault();
                let phone = document.querySelector('#phoneval3').children[0].value;
                if (!validatePhoneNumber(phone))
                    getField('phoneval3.error').html('REMINDER: Please, ensure you enter a valid 11 digits phone number').show();

                else
                    getField('phoneval3.error').html('REMINDER: Please, ensure you enter a valid 11 digits phone number').hide();

            });

            document.querySelector('#phoneval4').children[0].addEventListener('keyup', function (e) {
                e.preventDefault();
                let phone = document.querySelector('#phoneval4').children[0].value;
                if (!validatePhoneNumber(phone))
                    getField('phoneval4.error').html('REMINDER: Please, ensure you enter a valid 11 digits phone number').show();

                else
                    getField('phoneval4.error').html('REMINDER: Please, ensure you enter a valid 11 digits phone number').hide();

            });

            function validatePhoneNumber(input_str) {
                let phonePattern = /^(0)(7|8|9){1}(0|1){1}([0-9]{8})$/;
                return phonePattern.test(input_str);

            }

            // chi -

            let ipShortRegimen = document.querySelector("#ip_short_regimen").children[0];
            let ipComposition = document.querySelector("#ip_composition").children[0];

            let cpShortRegimen = document.querySelector("#cp_short_regimen").children[0];
            let cpComposition = document.querySelector("#cp_composition").children[0];

            let ipDrug1 = document.querySelector("#ip_drug_1").children[0];
            let ipDuration1 = document.querySelector("#ip_duration_1").children[0];
            let ipDrug2 = document.querySelector("#ip_drug_2").children[0];
            let ipDuration2 = document.querySelector("#ip_duration_2").children[0];
            let ipDrug3 = document.querySelector("#ip_drug_3").children[0];
            let ipDuration3 = document.querySelector("#ip_duration_3").children[0];
            let ipDrug4 = document.querySelector("#ip_drug_4").children[0];
            let ipDuration4 = document.querySelector("#ip_duration_4").children[0];
            let ipDrug5 = document.querySelector("#ip_drug_5").children[0];
            let ipDuration5 = document.querySelector("#ip_duration_5").children[0];


            let cpDrug1 = document.querySelector("#cp_drug_1").children[0];
            let cpDuration1 = document.querySelector("#cp_duration_1").children[0];
            let cpDrug2 = document.querySelector("#cp_drug_2").children[0];
            let cpDuration2 = document.querySelector("#cp_duration_2").children[0];
            let cpDrug3 = document.querySelector("#cp_drug_3").children[0];
            let cpDuration3 = document.querySelector("#cp_duration_3").children[0];
            let cpDrug4 = document.querySelector("#cp_drug_4").children[0];
            let cpDuration4 = document.querySelector("#cp_duration_4").children[0];
            let cpDrug5 = document.querySelector("#cp_drug_5").children[0];
            let cpDuration5 = document.querySelector("#cp_duration_5").children[0];

            ipShortRegimen.addEventListener('change', function () {
                if (ipShortRegimen.value === "") {
                    ipComposition.value = "";
                    ipDrug1.value = "";
                    ipDuration1.value = "";
                    ipDrug2.value = "";
                    ipDuration2.value = "";
                    ipDrug3.value = "";
                    ipDuration3.value = "";
                    ipDrug4.value = "";
                    ipDuration4.value = "";
                    ipDrug5.value = "";
                    ipDuration5.value = "";
                }
            });
            ipComposition.addEventListener('change', function () {
                if (ipShortRegimen.value === "") {
                    ipComposition.value = "";
                    ipShortRegimen.focus();
                    getField('ip_short_regimen.error').html('Fill this for drug to be dispensed').show();
                }
            });
            ipDrug1.addEventListener('change', function (e) {
                if (ipDrug1.value !== "") {
                    if (ipShortRegimen.value === "") {
                        ipDrug1.value = "";
                        ipShortRegimen.focus();
                        getField('ip_short_regimen.error').html('Fill this for drug to be dispensed').show();

                        return false;
                    }

                    if (ipComposition.value !== "") {
                        if (ipDrug1.value === "") {
                            ipComposition.value = "";
                            ipDrug1.focus();
                            getField('ip_drug_1.error').html('Fill this for drug to be dispensed').show();
                            return false;
                        }
                    }

                    ipDuration1.focus();
                    getField('ip_duration_1.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    ipDuration1.value = "";
                    getField('ip_duration_1.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }

            });
            ipDuration1.addEventListener('change', function (e) {
                if (ipDrug1.value === "") {
                    ipDuration1.value = "";
                    ipDrug1.focus();
                    getField('ip_drug_1.error').html('Fill this for drug to be dispensed').show();

                    return false;
                }
            });
            ipDrug2.addEventListener('change', function (e) {
                if (ipDrug2.value !== "") {
                    if (ipShortRegimen.value === "") {
                        ipDrug2.value = "";
                        ipShortRegimen.focus();
                        getField('ip_short_regimen.error').html('Fill this for drug to be dispensed').show();

                        return false;
                    }

                    if (ipComposition.value !== "") {
                        if (ipDrug2.value === "") {
                            ipComposition.value = "";
                            ipDrug2.focus();
                            getField('ip_drug_2.error').html('Fill this for drug to be dispensed').show();
                            return false;
                        }
                    }
                    ipDuration2.focus();
                    getField('ip_duration_2.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    ipDuration2.value = "";
                    return false;
                }

            });
            ipDuration2.addEventListener('change', function (e) {
                if (ipDrug2.value === "") {
                    ipDuration2.value = "";
                    ipDrug2.focus();
                    getField('ip_drug_2.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            ipDrug3.addEventListener('change', function (e) {
                if (ipDrug3.value !== "") {
                    if (ipShortRegimen.value === "") {
                        ipDrug3.value = "";
                        ipShortRegimen.focus();
                        getField('ip_short_regimen.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }

                    if (ipComposition.value !== "") {
                        if (ipDrug3.value === "") {
                            ipComposition.value = "";
                            ipDrug3.focus();
                            getField('ip_drug_3.error').html('Fill this for drug to be dispensed').show();
                            return false;
                        }
                    }
                    ipDuration3.focus();
                    getField('ip_duration_3.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    ipDuration3.value = "";
                    return false;
                }

            });
            ipDuration3.addEventListener('change', function (e) {
                if (ipDrug3.value === "") {
                    ipDuration3.value = "";
                    ipDrug3.focus();
                    getField('ip_drug_3.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            ipDrug4.addEventListener('change', function (e) {
                if (ipDrug4.value !== "") {
                    if (ipShortRegimen.value === "") {
                        ipDrug4.value = "";
                        ipShortRegimen.focus();
                        getField('ip_short_regimen.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }

                    if (ipComposition.value !== "") {
                        if (ipDrug4.value === "") {
                            ipComposition.value = "";
                            ipDrug4.focus();
                            getField('ip_drug_4.error').html('Fill this for drug to be dispensed').show();
                            return false;
                        }
                    }
                    ipDuration4.focus();
                    getField('ip_duration_4.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    ipDuration4.value = "";
                    return false;
                }

            });
            ipDuration4.addEventListener('change', function (e) {
                if (ipDrug4.value === "") {
                    ipDuration4.value = "";
                    ipDrug4.focus();
                    getField('ip_drug_4.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            ipDrug5.addEventListener('change', function (e) {
                if (ipDrug5.value !== "") {
                    if (ipShortRegimen.value === "") {
                        ipDrug5.value = "";
                        ipShortRegimen.focus();
                        getField('ip_short_regimen.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }

                    if (ipComposition.value !== "") {
                        if (ipDrug5.value === "") {
                            ipComposition.value = "";
                            ipDrug5.focus();
                            getField('ip_drug_5.error').html('Fill this for drug to be dispensed').show();
                            return false;
                        }
                    }
                    ipDuration5.focus();
                    getField('ip_duration_5.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    ipDuration5.value = "";
                    return false;
                }

            });
            ipDuration5.addEventListener('change', function (e) {
                if (ipDrug5.value === "") {
                    ipDuration5.value = "";
                    ipDrug5.focus();
                    getField('ip_drug_5.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });

            cpShortRegimen.addEventListener('change', function () {
                if (cpShortRegimen.value === "") {
                    cpComposition.value = "";
                    cpDrug1.value = "";
                    cpDuration1.value = "";
                    cpDrug2.value = "";
                    cpDuration2.value = "";
                    cpDrug3.value = "";
                    cpDuration3.value = "";
                    cpDrug4.value = "";
                    cpDuration4.value = "";
                    cpDrug5.value = "";
                    cpDuration5.value = "";
                }
            });
            cpComposition.addEventListener('change', function () {
                if (cpShortRegimen.value === "") {
                    cpComposition.value = "";
                    cpShortRegimen.focus();
                    getField('cp_short_regimen.error').html('Fill this for drug to be dispensed').show();
                }
            });

            cpDrug1.addEventListener('change', function (e) {
                if (cpDrug1.value !== "") {
                    if (cpShortRegimen.value === "") {
                        cpDrug1.value = "";
                        cpShortRegimen.focus();
                        getField('cp_short_regimen.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }

                    if (cpComposition.value !== "") {
                        if (cpDrug1.value === "") {
                            cpComposition.value = "";
                            cpDrug1.focus();
                            getField('cp_drug_1.error').html('Fill this for drug to be dispensed').show();
                            return false;
                        }
                    }

                    cpDuration1.focus();
                    getField('cp_duration_1.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    cpDuration1.value = "";
                    return false;
                }

            });
            cpDuration1.addEventListener('change', function (e) {
                if (cpDrug1.value === "") {
                    cpDuration1.value = "";
                    cpDrug1.focus();
                    getField('cp_drug_1.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            cpDrug2.addEventListener('change', function (e) {
                if (cpDrug2.value !== "") {
                    if (cpShortRegimen.value === "") {
                        cpDrug2.value = "";
                        cpShortRegimen.focus();
                        getField('cp_short_regimen.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }

                    if (cpComposition.value !== "") {
                        if (cpDrug2.value === "") {
                            cpComposition.value = "";
                            cpDrug2.focus();
                            getField('cp_drug_2.error').html('Fill this for drug to be dispensed').show();
                            return false;
                        }
                    }
                    cpDuration2.focus();
                    getField('cp_duration_2.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    cpDuration2.value = "";
                    return false;
                }

            });
            cpDuration2.addEventListener('change', function (e) {
                if (cpDrug2.value === "") {
                    cpDuration2.value = "";
                    cpDrug2.focus();
                    getField('cp_drug_2.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            cpDrug3.addEventListener('change', function (e) {
                if (cpDrug3.value !== "") {
                    if (cpShortRegimen.value === "") {
                        cpDrug3.value = "";
                        cpShortRegimen.focus();
                        getField('cp_short_regimen.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }

                    if (cpComposition.value !== "") {
                        if (cpDrug3.value === "") {
                            cpComposition.value = "";
                            cpDrug3.focus();
                            getField('cp_drug_3.error').html('Fill this for drug to be dispensed').show();
                            return false;
                        }
                    }
                    cpDuration3.focus();
                    getField('cp_duration_3.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    cpDuration3.value = "";
                    getField('cp_duration_3.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }

            });
            cpDuration3.addEventListener('change', function (e) {
                if (cpDrug3.value === "") {
                    cpDuration3.value = "";
                    cpDrug3.focus();
                    getField('cp_drug_3.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            cpDrug4.addEventListener('change', function (e) {
                if (cpDrug4.value !== "") {
                    if (cpShortRegimen.value === "") {
                        cpDrug4.value = "";
                        cpShortRegimen.focus();
                        getField('cp_short_regimen.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }

                    if (cpComposition.value !== "") {
                        if (cpDrug4.value === "") {
                            cpComposition.value = "";
                            cpDrug4.focus();
                            getField('cp_drug_4.error').html('Fill this for drug to be dispensed').show();
                            return false;
                        }
                    }
                    cpDuration4.focus();
                    getField('cp_duration_4.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    cpDuration4.value = "";
                    return false;
                }

            });
            cpDuration4.addEventListener('change', function (e) {
                if (cpDrug4.value === "") {
                    cpDuration4.value = "";
                    cpDrug4.focus();
                    getField('cp_drug_4.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            cpDrug5.addEventListener('change', function (e) {
                if (cpDrug5.value !== "") {
                    if (cpShortRegimen.value === "") {
                        cpDrug5.value = "";
                        cpShortRegimen.focus();
                        getField('cp_short_regimen.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }

                    if (cpComposition.value !== "") {
                        if (cpDrug5.value === "") {
                            cpComposition.value = "";
                            cpDrug5.focus();
                            getField('cp_drug_5.error').html('Fill this for drug to be dispensed').show();
                            return false;
                        }
                    }
                    cpDuration5.focus();
                    getField('cp_duration_5.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    cpDuration5.value = "";
                    return false;
                }

            });
            cpDuration5.addEventListener('change', function (e) {
                if (cpDrug5.value === "") {
                    cpDuration5.value = "";
                    cpDrug5.focus();
                    getField('cp_drug_5.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });


            let dotDrug1 = document.querySelector('#dot_drug_1').children[0];
            let dotStrength1 = document.querySelector('#dot_strength_1').children[0];
            let dotFrequency1 = document.querySelector('#dot_frequency_1').children[0];
            let dotDuration1 = document.querySelector('#dot_duration_1').children[0];
            let dotQtyPrescribed1 = document.querySelector('#dot_qtyPrescribed_1').children[0];

            let dotDrug2 = document.querySelector('#dot_drug_2').children[0];
            let dotStrength2 = document.querySelector('#dot_strength_2').children[0];
            let dotFrequency2 = document.querySelector('#dot_frequency_2').children[0];
            let dotDuration2 = document.querySelector('#dot_duration_2').children[0];
            let dotQtyPrescribed2 = document.querySelector('#dot_qtyPrescribed_2').children[0];


            dotDrug1.addEventListener('change', function (e) {
                if (dotDrug1.value !== "") {
                    dotStrength1.focus();
                    getField('dot_strength_1.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    dotStrength1.value = "";
                    dotFrequency1.value = "";
                    dotDuration1.value = "";
                    dotQtyPrescribed1.value = "";
                    return false;
                }

            });
            dotStrength1.addEventListener('change', function (e) {
                if (dotDrug1.value === "") {
                    dotStrength1.value = "";
                    dotDrug1.focus();
                    getField('dot_drug_1.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            dotFrequency1.addEventListener('change', function (e) {
                if (dotDrug1.value === "") {
                    dotFrequency1.value = "";
                    dotDrug1.focus();
                    getField('dot_drug_1.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            dotDuration1.addEventListener('change', function (e) {
                if (dotDrug1.value === "") {
                    dotDuration1.value = "";
                    dotDrug1.focus();
                    getField('dot_drug_1.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            dotQtyPrescribed1.addEventListener('keyup', function (e) {
                if (dotDrug1.value === "") {
                    dotQtyPrescribed1.value = "";
                    dotDrug1.focus();
                    getField('dot_drug_1.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });

            dotDrug2.addEventListener('change', function (e) {
                if (dotDrug2.value !== "") {
                    dotStrength2.focus();
                    getField('dot_strength_2.error').html('Fill this for drug to be dispensed').show();
                    return false;
                } else {
                    dotStrength2.value = "";
                    dotFrequency2.value = "";
                    dotDuration2.value = "";
                    dotQtyPrescribed2.value = "";
                    return false;
                }

            });
            dotStrength2.addEventListener('change', function (e) {
                if (dotDrug2.value === "") {
                    dotStrength2.value = "";
                    dotDrug2.focus();
                    getField('dot_drug_2.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            dotFrequency2.addEventListener('change', function (e) {
                if (dotDrug2.value === "") {
                    dotFrequency2.value = "";
                    dotDrug2.focus();
                    getField('dot_drug_2.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            dotDuration2.addEventListener('change', function (e) {
                if (dotDrug2.value === "") {
                    dotDuration2.value = "";
                    dotDrug2.focus();
                    getField('dot_drug_2.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });
            dotQtyPrescribed2.addEventListener('keyup', function (e) {
                if (dotDrug2.value === "") {
                    dotQtyPrescribed2.value = "";
                    dotDrug2.focus();
                    getField('dot_drug_2.error').html('Fill this for drug to be dispensed').show();
                    return false;
                }
            });

            beforeSubmit.push(function () {

                function validatePhoneNumber(input_str) {
                    let phonePattern = /^(0)(7|8|9){1}(0|1){1}([0-9]{8})$/;
                    return phonePattern.test(input_str);
                }

                let phonecheck1 = getValue('phoneval1.value');
                let phonecheck2 = getValue('phoneval2.value');
                let phonecheck3 = getValue('phoneval3.value');
                let phonecheck4 = getValue('phoneval4.value');
                let phonelock1 = document.querySelector('#phoneval1').children[0];
                let phonelock2 = document.querySelector('#phoneval2').children[0];
                let phonelock3 = document.querySelector('#phoneval3').children[0];
                let phonelock4 = document.querySelector('#phoneval4').children[0];

                switch (true) {
                    case (phonecheck1 === "" || phonecheck1 === null):
                        if (phonecheck2 === "" || phonecheck2 === null) {
                            if (phonecheck3 === "" || phonecheck3 === null) {
                                if (phonecheck4 === "" || phonecheck4 === null) {
                                    return true;
                                } else {
                                    if (validatePhoneNumber(phonecheck4) === false) {
                                        phonelock4.focus();
                                        getField('phoneval4.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                        return false;
                                    } else {
                                        return true;
                                    }
                                }
                            } else {
                                if (validatePhoneNumber(phonecheck3) === false) {
                                    phonelock3.focus();
                                    getField('phoneval3.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                    return false;
                                } else {
                                    if (phonecheck4 === "" || phonecheck4 === null) {
                                        return true;
                                    } else {
                                        if (validatePhoneNumber(phonecheck4) === false) {
                                            phonelock4.focus();
                                            getField('phoneval4.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                            return false;
                                        } else {
                                            return true;
                                        }
                                    }
                                }
                            }
                        } else {
                            if (validatePhoneNumber(phonecheck2) === false) {
                                phonelock2.focus();
                                getField('phoneval2.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                return false;
                            } else {
                                if (phonecheck3 === "" || phonecheck3 === null) {
                                    if (phonecheck4 === "" || phonecheck4 === null) {
                                        return true;
                                    } else {
                                        if (validatePhoneNumber(phonecheck4) === false) {
                                            phonelock4.focus();
                                            getField('phoneval4.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                            return false;
                                        } else {
                                            return true;
                                        }
                                    }
                                } else {
                                    if (validatePhoneNumber(phonecheck3) === false) {
                                        phonelock3.focus();
                                        getField('phoneval3.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                        return false;
                                    } else {
                                        if (phonecheck4 === "" || phonecheck4 === null) {
                                            return true;
                                        } else {
                                            if (validatePhoneNumber(phonecheck4) === false) {
                                                phonelock4.focus();
                                                getField('phoneval4.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                                return false;
                                            } else {
                                                return true;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        break;

                    case (phonecheck1 !== "" || phonecheck1 !== null):
                        if (validatePhoneNumber(phonecheck1) === false) {
                            phonelock1.focus();
                            getField('phoneval1.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                            return false;
                        } else {
                            if (phonecheck2 === "" || phonecheck2 === null) {
                                if (phonecheck3 === "" || phonecheck3 === null) {
                                    if (phonecheck4 === "" || phonecheck4 === null) {
                                        return true;
                                    } else {
                                        if (validatePhoneNumber(phonecheck4) === false) {
                                            phonelock4.focus();
                                            getField('phoneval4.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                            return false;
                                        } else {
                                            return true;
                                        }
                                    }
                                } else {
                                    if (validatePhoneNumber(phonecheck3) === false) {
                                        phonelock3.focus();
                                        getField('phoneval3.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                        return false;
                                    } else {
                                        if (phonecheck4 === "" || phonecheck4 === null) {
                                            return true;
                                        } else {
                                            if (validatePhoneNumber(phonecheck4) === false) {
                                                phonelock4.focus();
                                                getField('phoneval4.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                                return false;
                                            } else {
                                                return true;
                                            }
                                        }
                                    }
                                }
                            } else {
                                if (validatePhoneNumber(phonecheck2) === false) {
                                    phonelock2.focus();
                                    getField('phoneval2.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                    return false;
                                } else {
                                    if (phonecheck3 === "" || phonecheck3 === null) {
                                        if (phonecheck4 === "" || phonecheck4 === null) {
                                            return true;
                                        } else {
                                            if (validatePhoneNumber(phonecheck4) === false) {
                                                phonelock4.focus();
                                                getField('phoneval4.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                                return false;
                                            } else {
                                                return true;
                                            }
                                        }
                                    } else {
                                        if (validatePhoneNumber(phonecheck3) === false) {
                                            phonelock3.focus();
                                            getField('phoneval3.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                            return false;
                                        } else {
                                            if (phonecheck4 === "" || phonecheck4 === null) {
                                                return true;
                                            } else {
                                                if (validatePhoneNumber(phonecheck4) === false) {
                                                    phonelock4.focus();
                                                    getField('phoneval4.error').html('<b>Kindly fill a valid 11 digits phone number</b>').show();
                                                    return false;
                                                } else {
                                                    return true;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        break;
                    default:
                        return true;
                        break;
                }


                if (ipDrug1.value !== "") {
                    if (ipDuration1.value === "") {
                        ipDuration1.focus();
                        getField('ip_duration_1.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }

                if (ipDrug2.value !== "") {
                    if (ipDuration2.value === "") {
                        ipDuration2.focus();
                        getField('ip_duration_2.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }

                if (ipDrug3.value !== "") {
                    if (ipDuration3.value === "") {
                        ipDuration3.focus();
                        getField('ip_duration_3.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }

                if (ipDrug4.value !== "") {
                    if (ipDuration4.value === "") {
                        ipDuration4.focus();
                        getField('ip_duration_4.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }

                if (ipDrug5.value !== "") {
                    if (ipDuration5.value === "") {
                        ipDuration5.focus();
                        getField('ip_duration_5.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }

                if (cpDrug1.value !== "") {
                    if (cpDuration1.value === "") {
                        cpDuration1.focus();
                        getField('cp_duration_1.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }

                if (cpDrug2.value !== "") {
                    if (cpDuration2.value === "") {
                        cpDuration2.focus();
                        getField('cp_duration_2.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }

                if (cpDrug3.value !== "") {
                    if (cpDuration3.value === "") {
                        cpDuration3.focus();
                        getField('cp_duration_3.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }

                if (cpDrug4.value !== "") {
                    if (cpDuration4.value === "") {
                        cpDuration4.focus();
                        getField('cp_duration_4.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }

                if (cpDrug5.value !== "") {
                    if (cpDuration5.value === "") {
                        cpDuration5.focus();
                        getField('cp_duration_5.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }

                if (dotDrug1.value !== "") {

                    if (dotStrength1.value === "") {
                        dotStrength1.focus();
                        getField('dot_strength_1.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    } else if (dotFrequency1.value === "") {
                        dotFrequency1.focus();
                        getField('dot_frequency_1.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                    if (dotDuration1.value === "") {
                        dotDuration1.focus();
                        getField('dot_duration_1.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                    if (dotDuration1.value === "") {
                        dotDuration1.focus();
                        getField('dot_duration_1.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }

                    if (dotQtyPrescribed1.value === "") {
                        dotQtyPrescribed1.focus();
                        getField('dot_qtyPrescribed_1.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }
                if (dotDrug2.value !== "") {
                    if (dotStrength2.value === "") {
                        dotStrength2.focus();
                        getField('dot_strength_2.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                    if (dotFrequency2.value === "") {
                        dotFrequency2.focus();
                        getField('dot_frequency_2.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                    if (dotDuration2.value === "") {
                        dotDuration2.focus();
                        getField('dot_duration_2.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                    if (dotDuration2.value === "") {
                        dotDuration2.focus();
                        getField('dot_duration_2.error').html('Fill this for drug to be dispensed').show();
                        return false
                    }
                    if (dotQtyPrescribed2.value === "") {
                        dotQtyPrescribed2.focus();
                        getField('dot_qtyPrescribed_2.error').html('Fill this for drug to be dispensed').show();
                        return false;
                    }
                }

                return true;
            });
            $('.hasDatepicker').attr('readonly', true)
        });
    </script>

    <table style="margin-bottom: 30px;">
        <thead>
        <tr>
            <th style="text-align: center"><em>DR-TB In-Patient Discharge Form</em></th>
        </tr>
        </thead>
    </table>


    <fieldset>
        <legend className="legend_style">DR-TB Admission Details</legend>
        <table border="0" width="100%" height="50">
            <tr>

                <td width="60%" height="50%"> DR-TB Treatment Centre<br/>
                    <obs conceptId="166818" required="true"/>
                </td>
                <td width="40%" height="50%"> DR-TB State<br/>
                    <obs conceptId="166819" required="true"/>
                </td>
            </tr>
        </table>

        <table border="0" width="100%" height="50">
            <tr>
                <td width="60%" height="50%">Date of DR-TB Admission<br/>
                    <obs conceptId="166820" allowTime="false" required="true"/>
                </td>
                <td width="40%" height="50%"> Date of DR-TB Discharge<br/>
                    <obs conceptId="166821" required="true"/>
                </td>
            </tr>
        </table>
        <table border="0" width="100%" height="50">
            <tr>
                <td width="60%" height="50%"> DR-TB Registration No:<br/>
                    <obs conceptId="166822" required="true"/>
                </td>
                <td width="40%" height="50%"> Date of DR-TB Registration<br/>
                    <obs conceptId="166823" required="true"/>
                </td>
            </tr>

        </table>
        <table border="0" width="100%" height="50">
            <tr>
                <td width="60%" height="50%">Date of Treatment Initiation:<br/>
                    <obs conceptId="166824" required="true"/>
                </td>
                <!--  <td width="60%" height="50%"> Health Facility Number<br/>
                      <obs conceptId="166825"  />
                  </td> -->
            </tr>

        </table>

    </fieldset>

    <fieldset>
        <legend className="legend_style">DR-TB Discharge details</legend>
        <table>
            <tr>
                <td className="alnleft_f"> Facility Patient is Discharged to:<br/>
                    <obs conceptId="165508"/>
                </td>
                <td className="alnleft_s"> LGA of State<br/>
                    <obs conceptId="166015"/>
                </td>
            </tr>

        </table>

    </fieldset>


    <fieldset>
        <legend className="legend_style">DR-TB Treatment Regimen and Duration</legend>
        <table>
            <tr>
                <td width="13%">Any co-morbidity?</td>
                <td width="13%">
                    <obs id="tb_morbidity" conceptId="166662" answerConceptIds="1065,1066" answerLabels="Yes,No">
                        <controls>
                            <when value="1065" thenDisplay="#Specify_Details"/>
                        </controls>
                    </obs>
                </td>

            </tr>
            <tr id="Specify_Details">
                <td> Specify Co-morbidities:</td>
                <td style="width: auto;">
                    <obs conceptId="166663"/>
                </td>
                <td> Specify Drug used:</td>
                <td colSpan="4" style="width: auto;">
                    <obs conceptId="166663"/>
                </td>
            </tr>
        </table>
    </fieldset>

    <fieldset>
        <legend className="legend_style">Intensive Phase</legend>
        <table className="baseline-aligned">
            <tr>
                <td> Short Regimen</td>
                <td> Composition</td>
            </tr>
            <tr>
                <td>
                    <obs id="ip_short_regimen" conceptId="166979"
                         answerConceptIds="166976,166973,166967,166969,166972,166961,166964"
                         answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant"/>
                </td>
                <td>
                    <obs id="ip_composition" conceptId="166980"
                         answerConceptIds="166977,166974,166968,166970,166962,166965"
                         answerLabels="4-6 Bdq -Mfx- Cfz-Hh-Pto-E-Z,4-6 Bdq (4)-hLfx-Lzd-Cfz,6 Bdq-Pmn-Lzd,6Bdq-Mfx*-Cfz-Lzd, 6 Mfx-Lzd-Cfz-Dlm,6 Lzd-Cfz-Dlm*-Cs"/>
                </td>
            </tr>

            <tr>
                <td> Drugs</td>
                <td> Duration</td>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166983">
                    <td>
                        <obs id="ip_drug_1" conceptId="166981"
                             answerConceptIds="166976,166973,166967,166969,166972,166961,166964,166843,767,75948,82900,84360,72794,78385,71060,73449,81022,78788,80133,75976,74123,81457,82772,160019,450,73498,83352,73581,84836,160020,82912,76835"
                             answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant,HIGH DOSE ISONIAZID,RIFAMPICIN,ETHAMBUTOL,PYRAZINAMIDE,STREPTOMYCIN,CAPREOMYCIN,KANAMYCIN,AMIKACIN,CIPROFLOXACIN,OFLOXACIN,LEVOFLOXACIN,MOXIFLOXACIN,ETHIONAMIDE,CYCLOSERINE,P-AMINOSALICYLIC ACID,PROTHIONAMIDE,THIOACETAZONE,AMOXICILLIN AND CLAVULANIC ACID,CLARITHROMYCIN,RIFABUTIN,CLOFAZIMINE,TERIZIDONE,Viomycin,PYRIDOXINE,GATIFLOXACIN"/>
                    </td>
                    <td>
                        <obs id="ip_duration_1" conceptId="166982" answerConceptIds="166667,166668,166670"
                             answerLabels="4 months,5 months,6 months"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166983">
                    <td>
                        <obs id="ip_drug_2" conceptId="166981"
                             answerConceptIds="166976,166973,166967,166969,166972,166961,166964,166843,767,75948,82900,84360,72794,78385,71060,73449,81022,78788,80133,75976,74123,81457,82772,160019,450,73498,83352,73581,84836,160020,82912,76835"
                             answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant,HIGH DOSE ISONIAZID,RIFAMPICIN,ETHAMBUTOL,PYRAZINAMIDE,STREPTOMYCIN,CAPREOMYCIN,KANAMYCIN,AMIKACIN,CIPROFLOXACIN,OFLOXACIN,LEVOFLOXACIN,MOXIFLOXACIN,ETHIONAMIDE,CYCLOSERINE,P-AMINOSALICYLIC ACID,PROTHIONAMIDE,THIOACETAZONE,AMOXICILLIN AND CLAVULANIC ACID,CLARITHROMYCIN,RIFABUTIN,CLOFAZIMINE,TERIZIDONE,Viomycin,PYRIDOXINE,GATIFLOXACIN"/>
                    </td>
                    <td>
                        <obs id="ip_duration_2" conceptId="166982" answerConceptIds="166667,166668,166670"
                             answerLabels="4 months,5 months,6 months"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166983">
                    <td>
                        <obs id="ip_drug_3" conceptId="166981"
                             answerConceptIds="166976,166973,166967,166969,166972,166961,166964,166843,767,75948,82900,84360,72794,78385,71060,73449,81022,78788,80133,75976,74123,81457,82772,160019,450,73498,83352,73581,84836,160020,82912,76835"
                             answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant,HIGH DOSE ISONIAZID,RIFAMPICIN,ETHAMBUTOL,PYRAZINAMIDE,STREPTOMYCIN,CAPREOMYCIN,KANAMYCIN,AMIKACIN,CIPROFLOXACIN,OFLOXACIN,LEVOFLOXACIN,MOXIFLOXACIN,ETHIONAMIDE,CYCLOSERINE,P-AMINOSALICYLIC ACID,PROTHIONAMIDE,THIOACETAZONE,AMOXICILLIN AND CLAVULANIC ACID,CLARITHROMYCIN,RIFABUTIN,CLOFAZIMINE,TERIZIDONE,Viomycin,PYRIDOXINE,GATIFLOXACIN"/>
                    </td>
                    <td>
                        <obs id="ip_duration_3" conceptId="166982" answerConceptIds="166667,166668,166670"
                             answerLabels="4 months,5 months,6 months"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166983">
                    <td>
                        <obs id="ip_drug_4" conceptId="166981"
                             answerConceptIds="166976,166973,166967,166969,166972,166961,166964,166843,767,75948,82900,84360,72794,78385,71060,73449,81022,78788,80133,75976,74123,81457,82772,160019,450,73498,83352,73581,84836,160020,82912,76835"
                             answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant,HIGH DOSE ISONIAZID,RIFAMPICIN,ETHAMBUTOL,PYRAZINAMIDE,STREPTOMYCIN,CAPREOMYCIN,KANAMYCIN,AMIKACIN,CIPROFLOXACIN,OFLOXACIN,LEVOFLOXACIN,MOXIFLOXACIN,ETHIONAMIDE,CYCLOSERINE,P-AMINOSALICYLIC ACID,PROTHIONAMIDE,THIOACETAZONE,AMOXICILLIN AND CLAVULANIC ACID,CLARITHROMYCIN,RIFABUTIN,CLOFAZIMINE,TERIZIDONE,Viomycin,PYRIDOXINE,GATIFLOXACIN"/>
                    </td>
                    <td>
                        <obs id="ip_duration_4" conceptId="166982" answerConceptIds="166667,166668,166670"
                             answerLabels="4 months,5 months,6 months"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166983">
                    <td>
                        <obs id="ip_drug_5" conceptId="166981"
                             answerConceptIds="166976,166973,166967,166969,166972,166961,166964,166843,767,75948,82900,84360,72794,78385,71060,73449,81022,78788,80133,75976,74123,81457,82772,160019,450,73498,83352,73581,84836,160020,82912,76835"
                             answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant,HIGH DOSE ISONIAZID,RIFAMPICIN,ETHAMBUTOL,PYRAZINAMIDE,STREPTOMYCIN,CAPREOMYCIN,KANAMYCIN,AMIKACIN,CIPROFLOXACIN,OFLOXACIN,LEVOFLOXACIN,MOXIFLOXACIN,ETHIONAMIDE,CYCLOSERINE,P-AMINOSALICYLIC ACID,PROTHIONAMIDE,THIOACETAZONE,AMOXICILLIN AND CLAVULANIC ACID,CLARITHROMYCIN,RIFABUTIN,CLOFAZIMINE,TERIZIDONE,Viomycin,PYRIDOXINE,GATIFLOXACIN"/>
                    </td>
                    <td>
                        <obs id="ip_duration_5" conceptId="166982" answerConceptIds="166667,166668,166670"
                             answerLabels="4 months,5 months,6 months"/>
                    </td>
                </obsgroup>
            </tr>
        </table>
    </fieldset>

    <fieldset>
        <legend className="legend_style">Continuity Phase</legend>
        <table>
            <tr>
                <td> Short Regimen</td>
                <td> Composition</td>
            </tr>
            <tr>
                <td>
                    <obs id="cp_short_regimen" conceptId="166979"
                         answerConceptIds="166976,166973,166967,166969,166972,166961,166964"
                         answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant"/>
                </td>
                <td>
                    <obs id="cp_composition" conceptId="166980"
                         answerConceptIds="166978,166975,166968,166971,166963,166966"
                         answerLabels="5Mfx-Cfz-E-Z,5Bdq (2)–hLfx-Lzd-Cfz,6 Bdq-Pmn-Lzd,12Mfx-Cfz-Lzd,12Cfz-Lzd-Cs,6 Mfx-Lzd-Cfz,6 Lzd-Cfz-Cs"/>
                </td>
            </tr>


            <tr>
                <td> Drugs</td>
                <td> Duration</td>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166984">
                    <td>
                        <obs id="cp_drug_1" conceptId="166981"
                             answerConceptIds="166976,166973,166967,166969,166972,166961,166964,166843,767,75948,82900,84360,72794,78385,71060,73449,81022,78788,80133,75976,74123,81457,82772,160019,450,73498,83352,73581,84836,160020,82912,76835"
                             answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant,HIGH DOSE ISONIAZID,RIFAMPICIN,ETHAMBUTOL,PYRAZINAMIDE,STREPTOMYCIN,CAPREOMYCIN,KANAMYCIN,AMIKACIN,CIPROFLOXACIN,OFLOXACIN,LEVOFLOXACIN,MOXIFLOXACIN,ETHIONAMIDE,CYCLOSERINE,P-AMINOSALICYLIC ACID,PROTHIONAMIDE,THIOACETAZONE,AMOXICILLIN AND CLAVULANIC ACID,CLARITHROMYCIN,RIFABUTIN,CLOFAZIMINE,TERIZIDONE,Viomycin,PYRIDOXINE,GATIFLOXACIN"/>
                    </td>
                    <td>
                        <obs id="cp_duration_1" conceptId="166982" answerConceptIds="166985,166668,166670"
                             answerLabels="5 months,6 months,12 months"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166984">
                    <td>
                        <obs id="cp_drug_2" conceptId="166981"
                             answerConceptIds="166976,166973,166967,166969,166972,166961,166964,166843,767,75948,82900,84360,72794,78385,71060,73449,81022,78788,80133,75976,74123,81457,82772,160019,450,73498,83352,73581,84836,160020,82912,76835"
                             answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant,HIGH DOSE ISONIAZID,RIFAMPICIN,ETHAMBUTOL,PYRAZINAMIDE,STREPTOMYCIN,CAPREOMYCIN,KANAMYCIN,AMIKACIN,CIPROFLOXACIN,OFLOXACIN,LEVOFLOXACIN,MOXIFLOXACIN,ETHIONAMIDE,CYCLOSERINE,P-AMINOSALICYLIC ACID,PROTHIONAMIDE,THIOACETAZONE,AMOXICILLIN AND CLAVULANIC ACID,CLARITHROMYCIN,RIFABUTIN,CLOFAZIMINE,TERIZIDONE,Viomycin,PYRIDOXINE,GATIFLOXACIN"/>
                    </td>
                    <td>
                        <obs id="cp_duration_2" conceptId="166982" answerConceptIds="166985,166668,166670"
                             answerLabels="5 months,6 months,12 months"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166984">
                    <td>
                        <obs id="cp_drug_3" conceptId="166981"
                             answerConceptIds="166976,166973,166967,166969,166972,166961,166964,166843,767,75948,82900,84360,72794,78385,71060,73449,81022,78788,80133,75976,74123,81457,82772,160019,450,73498,83352,73581,84836,160020,82912,76835"
                             answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant,HIGH DOSE ISONIAZID,RIFAMPICIN,ETHAMBUTOL,PYRAZINAMIDE,STREPTOMYCIN,CAPREOMYCIN,KANAMYCIN,AMIKACIN,CIPROFLOXACIN,OFLOXACIN,LEVOFLOXACIN,MOXIFLOXACIN,ETHIONAMIDE,CYCLOSERINE,P-AMINOSALICYLIC ACID,PROTHIONAMIDE,THIOACETAZONE,AMOXICILLIN AND CLAVULANIC ACID,CLARITHROMYCIN,RIFABUTIN,CLOFAZIMINE,TERIZIDONE,Viomycin,PYRIDOXINE,GATIFLOXACIN"/>
                    </td>
                    <td>
                        <obs id="cp_duration_3" conceptId="166982" answerConceptIds="166985,166668,166670"
                             answerLabels="5 months,6 months,12 months"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166984">
                    <td>
                        <obs id="cp_drug_4" conceptId="166981"
                             answerConceptIds="166976,166973,166967,166969,166972,166961,166964,166843,767,75948,82900,84360,72794,78385,71060,73449,81022,78788,80133,75976,74123,81457,82772,160019,450,73498,83352,73581,84836,160020,82912,76835"
                             answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant,HIGH DOSE ISONIAZID,RIFAMPICIN,ETHAMBUTOL,PYRAZINAMIDE,STREPTOMYCIN,CAPREOMYCIN,KANAMYCIN,AMIKACIN,CIPROFLOXACIN,OFLOXACIN,LEVOFLOXACIN,MOXIFLOXACIN,ETHIONAMIDE,CYCLOSERINE,P-AMINOSALICYLIC ACID,PROTHIONAMIDE,THIOACETAZONE,AMOXICILLIN AND CLAVULANIC ACID,CLARITHROMYCIN,RIFABUTIN,CLOFAZIMINE,TERIZIDONE,Viomycin,PYRIDOXINE,GATIFLOXACIN"/>
                    </td>
                    <td>
                        <obs id="cp_duration_4" conceptId="166982" answerConceptIds="166985,166668,166670"
                             answerLabels="5 months,6 months,12 months"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166984">
                    <td>
                        <obs id="cp_drug_5" conceptId="166981"
                             answerConceptIds="166976,166973,166967,166969,166972,166961,166964,166843,767,75948,82900,84360,72794,78385,71060,73449,81022,78788,80133,75976,74123,81457,82772,160019,450,73498,83352,73581,84836,160020,82912,76835"
                             answerLabels="WHO Short Oral MDR-TB,Short Oral MDR-TB,Short Oral PreXDR-TB (FQ resistant BPaL),Long oral MDR/RR-TB,PreXDR-TB (resistant to FQ),Fluoroquinolone susceptible,Fluoroquinolone resistant,HIGH DOSE ISONIAZID,RIFAMPICIN,ETHAMBUTOL,PYRAZINAMIDE,STREPTOMYCIN,CAPREOMYCIN,KANAMYCIN,AMIKACIN,CIPROFLOXACIN,OFLOXACIN,LEVOFLOXACIN,MOXIFLOXACIN,ETHIONAMIDE,CYCLOSERINE,P-AMINOSALICYLIC ACID,PROTHIONAMIDE,THIOACETAZONE,AMOXICILLIN AND CLAVULANIC ACID,CLARITHROMYCIN,RIFABUTIN,CLOFAZIMINE,TERIZIDONE,Viomycin,PYRIDOXINE,GATIFLOXACIN"/>
                    </td>
                    <td>
                        <obs id="cp_duration_5" conceptId="166982" answerConceptIds="166985,166668,166670"
                             answerLabels="5 months,6 months,12 months"/>
                    </td>
                </obsgroup>
            </tr>

        </table>

    </fieldset>

    <fieldset>

        <table style="margin-top: 20px;">

            <tr>

                <td width="13%">Any Adverse reaction while patients was on Treatment:</td>
                <td width="13%">
                    <obs id="tb_Reaction" style="yes_no_dropdown" conceptId="166673" answerConceptIds="1065,1066">
                        <controls>
                            <when value="1065" thenDisplay="#Specify_typeOfAdverse"/>
                        </controls>
                    </obs>
                </td>

            </tr>

        </table>
    </fieldset>
    <!-- Adverse Drugs Update session -->

    <fieldset id="Specify_typeOfAdverse">
        <legend>Adverse reaction</legend>
        <table>
            <tr>
                <td>Type</td>
                <td>Date</td>
                <td>Management</td>
                <td>Other Comments</td>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166676">
                    <td className="alnleft_s">
                        <obs conceptId="166674"
                             answerConceptIds="166839,215,29,159298,112989,113478,121849,868,5978,151,80,75948,166840"
                             answerLabels="Skin rash with or without Itching,Jaundice,hepatitis,Visual Impairment,shock,Purpura,acute renal failure,Anorexia,Nausea,Abdominal pain,Joint pains,Burning/numbness in the hands/ feet,Orange/red urine"/>
                    </td>
                    <td className="alnleft_s">
                        <obs conceptId="166664"/>
                    </td>
                    <td className="alnleft_s">
                        <obs conceptId="166677"
                             answerConceptIds="166986,166987,166988,166989,166990,166991,166992,166993,166994,166995,166996,166997,166998,166999,167000,167001"
                             answerLabels="Stop anti-TB drugs,Stop anti-TB drugs and refer to the Medical Officer,Stop ethambutol,Stop ethambutol and refer to the Medical Officer,Stop rifampicin,Stop rifampicin and refer to the Medical Officer,Give drugs with small meals or just before bedtime,Advise patient to swallow pills slowly with small sips of water,Advise patient to swallow pills slowly with small sips of water ; If symptoms persist or worsen refer to hospital,Pyridoxine 50 -100mg daily,Reassurance, Counsel patients before starting treatment,encourage increase fluid intake,Reassure and counsel patients before starting treatment and encourage increase fluid intake,Give drugs before bedtime,Change intermittent to daily rifampicin administration"/>
                    </td>
                    <td>
                        <obs conceptId="167002"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166676">
                    <td className="alnleft_s">
                        <obs conceptId="166674"
                             answerConceptIds="166839,215,29,159298,112989,113478,121849,868,5978,151,80,75948,166840"
                             answerLabels="Skin rash with or without Itching,Jaundice,hepatitis,Visual Impairment,shock,Purpura,acute renal failure,Anorexia,Nausea,Abdominal pain,Joint pains,Burning/numbness in the hands/ feet,Orange/red urine"/>
                    </td>
                    <td className="alnleft_s">
                        <obs conceptId="166664"/>
                    </td>
                    <td className="alnleft_s">
                        <obs conceptId="166677"
                             answerConceptIds="166986,166987,166988,166989,166990,166991,166992,166993,166994,166995,166996,166997,166998,166999,167000,167001"
                             answerLabels="Stop anti-TB drugs,Stop anti-TB drugs and refer to the Medical Officer,Stop ethambutol,Stop ethambutol and refer to the Medical Officer,Stop rifampicin,Stop rifampicin and refer to the Medical Officer,Give drugs with small meals or just before bedtime,Advise patient to swallow pills slowly with small sips of water,Advise patient to swallow pills slowly with small sips of water ; If symptoms persist or worsen refer to hospital,Pyridoxine 50 -100mg daily,Reassurance, Counsel patients before starting treatment,encourage increase fluid intake,Reassure and counsel patients before starting treatment and encourage increase fluid intake,Give drugs before bedtime,Change intermittent to daily rifampicin administration"/>
                    </td>
                    <td>
                        <obs conceptId="167002"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166676">
                    <td className="alnleft_s">
                        <obs conceptId="166674"
                             answerConceptIds="166839,215,29,159298,112989,113478,121849,868,5978,151,80,75948,166840"
                             answerLabels="Skin rash with or without Itching,Jaundice,hepatitis,Visual Impairment,shock,Purpura,acute renal failure,Anorexia,Nausea,Abdominal pain,Joint pains,Burning/numbness in the hands/ feet,Orange/red urine"/>
                    </td>
                    <td className="alnleft_s">
                        <obs conceptId="166664"/>
                    </td>
                    <td className="alnleft_s">
                        <obs conceptId="166677"
                             answerConceptIds="166986,166987,166988,166989,166990,166991,166992,166993,166994,166995,166996,166997,166998,166999,167000,167001"
                             answerLabels="Stop anti-TB drugs,Stop anti-TB drugs and refer to the Medical Officer,Stop ethambutol,Stop ethambutol and refer to the Medical Officer,Stop rifampicin,Stop rifampicin and refer to the Medical Officer,Give drugs with small meals or just before bedtime,Advise patient to swallow pills slowly with small sips of water,Advise patient to swallow pills slowly with small sips of water ; If symptoms persist or worsen refer to hospital,Pyridoxine 50 -100mg daily,Reassurance, Counsel patients before starting treatment,encourage increase fluid intake,Reassure and counsel patients before starting treatment and encourage increase fluid intake,Give drugs before bedtime,Change intermittent to daily rifampicin administration"/>
                    </td>
                    <td>
                        <obs conceptId="167002"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166676">
                    <td className="alnleft_s">
                        <obs conceptId="166674"
                             answerConceptIds="166839,215,29,159298,112989,113478,121849,868,5978,151,80,75948,166840"
                             answerLabels="Skin rash with or without Itching,Jaundice,hepatitis,Visual Impairment,shock,Purpura,acute renal failure,Anorexia,Nausea,Abdominal pain,Joint pains,Burning/numbness in the hands/ feet,Orange/red urine"/>
                    </td>
                    <td className="alnleft_s">
                        <obs conceptId="166664"/>
                    </td>
                    <td className="alnleft_s">
                        <obs conceptId="166677"
                             answerConceptIds="166986,166987,166988,166989,166990,166991,166992,166993,166994,166995,166996,166997,166998,166999,167000,167001"
                             answerLabels="Stop anti-TB drugs,Stop anti-TB drugs and refer to the Medical Officer,Stop ethambutol,Stop ethambutol and refer to the Medical Officer,Stop rifampicin,Stop rifampicin and refer to the Medical Officer,Give drugs with small meals or just before bedtime,Advise patient to swallow pills slowly with small sips of water,Advise patient to swallow pills slowly with small sips of water ; If symptoms persist or worsen refer to hospital,Pyridoxine 50 -100mg daily,Reassurance, Counsel patients before starting treatment,encourage increase fluid intake,Reassure and counsel patients before starting treatment and encourage increase fluid intake,Give drugs before bedtime,Change intermittent to daily rifampicin administration"/>
                    </td>
                    <td>
                        <obs conceptId="167002"/>
                    </td>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="166676">
                    <td className="alnleft_s">
                        <obs conceptId="166674"
                             answerConceptIds="166839,215,29,159298,112989,113478,121849,868,5978,151,80,75948,166840"
                             answerLabels="Skin rash with or without Itching,Jaundice,hepatitis,Visual Impairment,shock,Purpura,acute renal failure,Anorexia,Nausea,Abdominal pain,Joint pains,Burning/numbness in the hands/ feet,Orange/red urine"/>
                    </td>
                    <td className="alnleft_s">
                        <obs conceptId="166664"/>
                    </td>
                    <td className="alnleft_s">
                        <obs conceptId="166677"
                             answerConceptIds="166986,166987,166988,166989,166990,166991,166992,166993,166994,166995,166996,166997,166998,166999,167000,167001"
                             answerLabels="Stop anti-TB drugs,Stop anti-TB drugs and refer to the Medical Officer,Stop ethambutol,Stop ethambutol and refer to the Medical Officer,Stop rifampicin,Stop rifampicin and refer to the Medical Officer,Give drugs with small meals or just before bedtime,Advise patient to swallow pills slowly with small sips of water,Advise patient to swallow pills slowly with small sips of water ; If symptoms persist or worsen refer to hospital,Pyridoxine 50 -100mg daily,Reassurance, Counsel patients before starting treatment,encourage increase fluid intake,Reassure and counsel patients before starting treatment and encourage increase fluid intake,Give drugs before bedtime,Change intermittent to daily rifampicin administration"/>
                    </td>
                    <td>
                        <obs conceptId="167002"/>
                    </td>
                </obsgroup>
            </tr>
        </table>
    </fieldset>
    <!--TB Regimen & Duration at Dot Facility-->
    <fieldset>
        <legend className="legend_style">Tb Regimen to be continued at DoT Facility</legend>
        <table className="baseline-aligned">
            <tr>
                <td>
                    <label>Drugs</label>

                </td>
                <td>
                    <label>Strength</label>
                </td>
                <td>
                    <label>Frequency</label>
                </td>
                <td>
                    <label>Duration </label>
                </td>
                <td>
                    <label>Qty Prescribed</label>
                </td>

            </tr>
            <tr>
                <obsgroup groupingConceptId="165728">
                    <td>
                        <obs className='gridmenu' id="dot_drug_1" conceptId="165304"
                             answerConceptIds="1675,768,656,1108" answerLabels="RHZE,RHZ,RHE,EH"/>
                    </td>
                    <td>
                        <obs className='gridmenu' id="dot_strength_1" conceptId="165725"
                             answerConceptIds="166061,165622,166062,162401,5622"
                             answerLabels="150mg/75mg,300mg/150mg,150mg/75mg/40mg,Kit,Others"/>
                    </td>
                    <td>
                        <obs className='gridmenu' id="dot_frequency_1" conceptId="165723"
                             answerConceptIds="160862,160858,165721,166056,166057,160870,165722,166058,5622"
                             answerLabels="OD,BD,2 BD,3 BD,4 BD,QDS,3ce/week,Nocte,Others"/>
                    </td>
                    <td>

                        <obs id="dot_duration_1" conceptId="166838" answerConceptIds="166667,166668,166670,166671"
                             answerLabels="2 months,4 months,10 months,12 months"/>

                    </td>
                    <td>
                        <obs id="dot_qtyPrescribed_1" conceptId="160856"/>
                    </td>

                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="165728">
                    <td>
                        <obs className='gridmenu' id="dot_drug_2" conceptId="165304"
                             answerConceptIds="83352,656,767,82900,75948"
                             answerLabels="Rifabutin,HIGH DOSE ISONIAZID,RIFAMPICIN,Pyrazinamide,Ethambutol"/>
                    </td>
                    <td>
                        <obs className='gridmenu' id="dot_strength_2" conceptId="165725"
                             answerConceptIds="166063,165075,165074,165076,166054,5622"
                             answerLabels="1g,150mg,300mg,100mg,400mg,Others"/>
                    </td>
                    <td>
                        <obs className='gridmenu' id="dot_frequency_2" conceptId="165723"
                             answerConceptIds="160862,160858,165721,166056,166057,160870,165722,166058,5622"
                             answerLabels="OD,BD,2 BD,3 BD,4 BD,QDS,3ce/week,Nocte,Others"/>
                    </td>

                    <td>
                        <obs conceptId="166838" id="dot_duration_2" answerConceptIds="166667,166668,166670,166671"
                             answerLabels="2 months,4 months,10 months,12 months"/>
                    </td>

                    <td>
                        <obs conceptId="160856" id="dot_qtyPrescribed_2"/>
                    </td>

                </obsgroup>
            </tr>
        </table>
    </fieldset>


    <!--Last part of the form-New facility contact details-->
    <fieldset>
        <legend className="legend_style">STBLCO and Focal Person Contact</legend>
        <table border="0" width="100%" Height="350%">
            <tr>
                <td width="60" height="50"> Name of STBLCO Patient is Discharged to:<br/>
                    <obs conceptId="166810"/>
                </td>
                <td width="60" height="50"> Phone No of STBLCO<br/>
                    <obs conceptId="166811" id="phoneval1"/>

                </td>
            </tr>
            <tr>
                <td width="60" height="50"> Name of State DR-TB Focal Person:<br/>
                    <obs conceptId="166812"/>
                </td>
                <td width="60" height="50"> Phone No of State DR-TB Focal Person<br/>
                    <obs conceptId="166813" id="phoneval2"/>

                </td>
            </tr>
            <tr>
                <td width="60" height="50"> Name of Treatment Centre Doctor:<br/>
                    <obs conceptId="166814"/>
                </td>
                <td width="60" height="50"> Phone No of Treatment Centre Doctor<br/>
                    <obs conceptId="166815" id="phoneval3"/>

                </td>
            </tr>
            <tr>
                <td width="60" height="50"> Name of Treatment Centre Matron:<br/>
                    <obs conceptId="166816"/>
                </td>
                <td width="60" height="50"> Phone No of Treatment Centre Matron<br/>
                    <obs conceptId="166817" id="phoneval4"/>

                </td>
            </tr>
        </table>


    </fieldset>


    <fieldset>
        <legend className="legend_style"><em>Encounter Date and Signature</em></legend>
        <table className="table" width="100%">
            <tr>

                <td className="alnright_s">Visit Date:</td>
                <td className="alnleft_s">
                    <encounterDate id="encounter_Date " showTime="false" allowFutureDates="false"/>
                </td>
                <td className="alnleft_s">Provider's Name:</td>
                <td className="alnleft_s">
                    <encounterProvider default="currentUser"/>
                </td>

                <td className="alnright_s">Facility:</td>
                <td className="alnleft_s">
                    <encounterLocation default="SessionAttribute:emrContext.sessionLocationId"/>
                </td>
            </tr>
        </table>
    </fieldset>


    <submit/>

</htmlform>