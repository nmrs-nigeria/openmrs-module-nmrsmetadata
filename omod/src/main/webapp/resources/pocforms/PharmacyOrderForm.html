<htmlform formUuid="4a238dc4-a76b-4c0f-a100-229d98fd5758" formName="Pharmacy Order Form" formEncounterType="a1fa6aa3-59e1-4833-a28c-bb62f2fb07df" formVersion="2018">
    <macros>
        paperFormId = (Fill this in)
        headerColor =#2f1c55
        fontOnHeaderColor = white
    </macros>
    <style>
		.section {
		border: 1px solid $headerColor;
		padding: 2px;
		text-align: left;
		margin-bottom: 1em;
		}
		.sectionHeader {
		background-color: #2f1c55;
		color: white;
		/* display: block; */
		padding: 2px;
		font-weight: bold;
		}
		table tr:nth-child(even) {
		background: #ffffff;
		}
		.alnright{
		text-align: right;
		color:#000000;
		width: 25%;
		}
		td {
		border: none;
		}
        .error{
               color:red;
         }
		table th, table td {
		padding: 5px 10px;
		border: None;
		}
		.legend_style {
		max-width: 35%;
		background: #FAFAFA;
		<!--padding: 5px;-->
		margin: 0px left;
		box-shadow: 1px 1px 25px rgba(0,0,0,0.10);
		border-radius: 2px;
		border: 1px solid #305a72;
		border-bottom-left-radius: 2px;
		text-transform:initial;

		}
		form fieldset, .form fieldset {
		min-width: 98%;
		border: none;
		border-top: 1px solid #305a72;

		}
		table th, table td {
		padding: 5px 10px;
		/* border: 1px solid #DDD; */
		}
		table tr {
		border: None;
		}
		/* ul.select, .form input, .form select, .form textarea, .form ul.select {
		padding: 2px 10px;
		}
		form input, form select, form textarea, form ul.select, .form input, .form select, .form textarea, .form ul.select {
		padding: 2px 10px;
		} */
		form select, .form select {
		max-width: 100px;
		}
		body {
		font-family: "OpenSans", Arial, sans-serif;
		color: #363463;
		font-size: 14px;
		}
               #w46 {
                     max-width: 70px;
                }
		span.gridmenu select { width: 6em; }
                span.obs-field option { width: 6em; }
                span.gridmenu input { width: 6em; }
	</style>
    <script >
      jQuery(function() {
         getField('arvdosage.value').change(function() {
         var arvdos = getValue('arvdosage.value');
             if(arvdos &lt; "0.5"){
         window.alert('ARV Dosage:- ' + getValue('arvdosage.value')+' Out of Range')
         setValue('arvdosage.value')
        }
else if(arvdos &gt; "10"){
       //window.alert('ARV Dosage-: ' + getValue('arvdosage.value')+' Out of Range')
        if( confirm('ARV Dosage-: ' +getValue('arvdosage.value')+' Out of Range? Are you sure you want to submit?') ) {
						return true;
					}
					else {
						setValue('arvdosage.value')
						return false;
					}
}
         });
});
    </script>
    
    <!-- UPDATED (ADDED) -->
<script type="text/javascript">
<!-- Error Checking before Form Submit -->
	// checking that line, age, regimen and duration are filled while allowing for OI flexibility

beforeSubmit.push(function() {

	if (((getValue('oi_drug.value') != "") || (getValue('tb_drug.value') != "")) &amp;&amp; ((getValue('TreatmentAgeCategory.value') == ""))) {

		if( confirm('ARV entries are empty!!!  Sure you want to submit OI entries only?') ) {
			return true;
		}else {
			return false;
		}
	}else {
			var error = false;
		<!-- Clear the previous errors -->
			setValue('TreatmentAgeCategory.error', '');
			setValue('RegimenLine.error', '');
			setValue('Adult1stLine.error', '');
			setValue('Adult2ndLine.error', '');
			setValue('Ped1stLine.error', '');
			setValue('Ped2ndLine.error', '');
			setValue('duration_s.error', '');

		// ARV
			var TreatmentAgeCategory = getValue('TreatmentAgeCategory.value');
			var RegimenLine = getValue('RegimenLine.value');
			var Adult1stLine = getValue('Adult1stLine.value');
			var Adult2ndLine = getValue('Adult2ndLine.value');
			var Ped1stLine = getValue('Ped1stLine.value');
			var Ped2ndLine = getValue('Ped2ndLine.value');
			var duration_s = getValue('duration_s.value');

		switch (true) {
			<!-- TreatmentAgeCategory -->
			case (TreatmentAgeCategory == ""):
				getField('TreatmentAgeCategory.error').html('This field cannot be empty').show();
				error=true;
				break;

			<!-- RegimenLine -->
			case (RegimenLine == ""):
				getField('RegimenLine.error').html('This field cannot be empty').show();
				error=true;
				break;

			<!-- duration_s -->
			case (duration_s == ""):
				getField('duration_s.error').html('This field cannot be empty').show();
				error=true;
				break;


			<!-- Adult1stLine -->
			case ((Adult1stLine != "") || (Adult2ndLine != "") || (Ped1stLine != "") || (Ped2ndLine != "")):
				return true;

			case (error == true):
				return false;
				break;

			default:
				window.alert('Patients Regimen Line MUST be entered and can not be empty')
				break;
		}
	}
});

</script>
    
    <script type="text/javascript">

	var $ = jQuery;
	$(document).ready(function ()
	{
	   $('.hasDatepicker').attr('readonly', true);
        $

	});


</script>

<!--
    <div class="hidden" id="encounter-details" sectionTag="section" headerStyle="title" headerLabel="Encounter Details">
        <fieldset>
            <legend class="legend_style">When?</legend>
            <label>When?</label>
            <encounterDate default="now" showTime="false" allowFutureDates="false"/>
        </fieldset>

        <fieldset>
            <legend>Who?</legend>
            <label>Who?</label>
            <encounterProviderAndRole default="currentUser" encounterRole="240b26f9-dd88-4172-823d-4a8bfeb7841f"                                                     required="true"/>
        </fieldset>

        <fieldset>
            <legend>Where?</legend>
            <label>Where?</label>
            <encounterLocation default="SessionAttribute:emrContext.sessionLocationId"/>
        </fieldset>
    </div>
-->

    <table style="margin-bottom: 20px;">
        <thead>
        <tr><th colspan='5' style="text-align: center">Pharmacy Order Form</th></tr>
        </thead>
    </table>

<!-- UPDATED -->
	<fieldset style="border: 1px solid #305a72; min-width: 90%; margin-left:5%; padding: 6px; margin-bottom: 2%; border-radius: 9px;">
        <legend class="legend_style">Last Clinical Parameters</legend>
        <table id="dashboard" cellspacing="10" cellpadding="5" align="center">
            <tr>
				<td><b>Treat Age:</b><font color='blue' style="font-weight: bold"><lookup complexExpression="$fn.latestObs('165720').valueCoded.name"/> </font></td>
				<td><b>Last Pick Up Date:</b><font color='blue' style="font-weight: bold"><lookup expression="fn.latestObs('164506').obsDatetime" /> </font></td>
			</tr>
			<tr>
				<td><b>Current Line:</b><font color='blue' style="font-weight: bold"><lookup complexExpression="$fn.latestObs('165708').valueCoded.name"/> </font></td>
				<td><b>Current Regimen:</b><font color='blue' style="font-weight: bold"><lookup complexExpression="$fn.latestObs('164506').valueCoded.name"/> </font></td>
			</tr>

        </table>
    </fieldset>

	<!-- UPDATED -->
    <table class="baseline-aligned">
        <tr>
            <td></td>

            <td style="alnright">
                <label>Visit Date (Dispensed Date):</label>
                <div class="enable_disable_control" style="pointer-events: none">
                    <encounterDate default="today" />
                </div>
            </td>
        </tr>
    </table>
    <fieldset>
        <table>
            <tr>

                <td>
                    <label>Treatment type</label>
                    <div class="enable_disable_control" style="pointer-events: none">
                        <obs conceptId="165945" answerLabel=""/>
                    </div>
                </td>
                <td>
                    <label>Visit Type</label>
                    <div class="enable_disable_control" style="pointer-events: none">
                        <obs conceptId="164181" id="VisitType" answerConceptIds="164180,160530" answerLabels="Initial Visit,Follow-up Visit"/>
                    </div>
                </td>
                <includeIf velocityTest="$patient.gender == 'F' ">
                    <td>
                        <label>Pregnancy Status</label>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165050" answerLabel=""/>
                        </div>
                    </td>
                </includeIf>
                <td>
                    <label>Pick Up Reason</label>
                    <div class="enable_disable_control" style="pointer-events: none">
                        <obs conceptId="165774" answerLabel=""/>
                    </div>
                </td>

            </tr>
        </table>
    </fieldset>
    <br/>
    
    <fieldset>
		<legend class="legend_style">Service Type</legend>
		<table class="table" width="100%">
			<td>
				<table id="ServiceDeliveryModel" class="table" width="100%">
					<tr>
						<td>
							<label>Service Delivery Model</label>
							<div class="enable_disable_control" style="pointer-events: none">
							<obs id="ServiceDeliveryModel" conceptId="166148" answerConceptIds="166276,166277,166149" answerLabels="Facility, Community, Multi-Month Dispensing (MMD)">
								<controls>
									<when value="166276" thenDisplay="#Facility_Dispensing"/>
									<when value="166277" thenDisplay="#Community_Dispensing"/>
									<when value="166149" thenDisplay="#Multi_Month_Dispensing"/>												
								</controls>
							</obs>
							</div>
						</td>
					</tr>
				</table>
			</td>

			<td>
				<table id="Facility_Dispensing" class="table" width="100%">
					<tr>
						<td>
							<label>Facility Dispensing </label>
							<div class="enable_disable_control" style="pointer-events: none">
							<obs conceptId='166276' answerConceptIds="166153,166151,166279" answerLabels="Not Differenciated, Fast Track, Adolecent Clinic"/>
							</div>
						</td>
					</tr>
				</table>
			</td>

			<td>
				<table id="Community_Dispensing" class="table" width="100%">
					<tr>
						<td>
							<label>Community Dispensing </label>
							<div class="enable_disable_control" style="pointer-events: none">
							<obs conceptId='166277' answerConceptIds="166134,166135,166280" answerLabels="Community Pharmacy, Community ART Group, Home Delivery"/>
							</div>
						</td>
					</tr>
				</table>
			</td>

			<td>
				<table id="Multi_Month_Dispensing" class="table" width="100%">
					<tr>
						<td>
							<label>Multi-Month Dispensing (MMD)</label>
							<div class="enable_disable_control" style="pointer-events: none">
							<obs conceptId='166149' answerConceptIds="166281,166282,166283" answerLabels="MMD &lt; 3, MMD 3 to 5, MMD &gt;= 6"/>
							</div>
						</td>
					</tr>
				</table>
			</td>
        </table>
	</fieldset>

    <fieldset>
        <legend class="legend_style">ARV Medication Adherence</legend>
        <table class="baseline-aligned">
            <tr>
                <td>
                    <label>Number of missed doses per month</label>
                    <div class="enable_disable_control" style="pointer-events: none">
                        <obs conceptId="165836" answerLabel=""/>
                    </div>
                </td>
                <td>

                    <label>Adherence counselling offered</label>
                    <div class="enable_disable_control" style="pointer-events: none">
                        <obs conceptId="165832" answerLabel=""/>
                    </div>
                </td>
                <td>

                </td>
            </tr>
        </table>
    </fieldset>

    <br/>

    <fieldset>
        <legend class="legend_style">ARV Medication</legend>
   		 <table class="table" width="100%">
            <tr>
	           <td class="alnleft">
					<b>Treatment Age category</b>
					<div class="enable_disable_control" style="pointer-events: none">
						<obs id="TreatmentAgeCategory" conceptId="165720" answerConceptIds="1528, 165709" answerLabels="Pediatric, Adult"> </obs>
			   		</div>
			   </td>
               <td>
					<table class="table" width="100%">
						<tr>
							<td><label>Regimen Line</label></td>
						</tr>
						<tr>
							<td>
								<div class="enable_disable_control" style="pointer-events: none">
								<obs id="RegimenLine" conceptId="165708" answerConceptIds="164507, 164514, 165703, 164506, 164513, 165702" answerLabels="Child First Line, Child Second Line, Child Salvage, Adult First Line, Adult Second Line, Adult Salvage">
												<controls>
													<when value="164507" thenDisplay="#ped_first_line"/>
													<when value="164514" thenDisplay="#ped_second_line"/>
													<when value="165703" thenDisplay="#ped_salvage"/>
													<when value="164506" thenDisplay="#adult_first_line"/>
													<when value="164513" thenDisplay="#adult_second_line"/>
													<when value="165702" thenDisplay="#adult_salvage"/>
												</controls>
								</obs>
								</div>
							</td>
	
						</tr>
					</table>
				</td>
               	<td>
						<table id="adult_first_line" class="table" width="100%">
							<tr>
								<td>
									<label>Adult 1st Line Regimens</label>
									<div class="enable_disable_control" style="pointer-events: none">
										<obs conceptId="164506" id="Adult1stLine"/>
									</div>
								</td>
							</tr>
						</table>
			</td>

			<td>
				<table id="adult_second_line" class="table" width="100%">
						<tr>
								<td>
									<label>Adult 2nd Line Regimens</label>
									<div class="enable_disable_control" style="pointer-events: none">
										<obs conceptId="164513" id="Adult2ndLine"/>
									</div>	
								</td>
						</tr>
				</table>
			</td>
            <td>
				<table id="adult_salvage" class="table" width="100%">
					<tr>
								<td>
									<label>Adult 3rd Line Regimens</label>
									<div class="enable_disable_control" style="pointer-events: none">
									<obs conceptId="165702" id="Adult3rdLine"/>
									</div>
								</td>
					</tr>
				</table>
			</td>

			<td>
				<table id="ped_first_line" class="table" width="100%">
					<tr>
							<td>
									<label>Pediatric 1st Line Regimens</label>
									<div class="enable_disable_control" style="pointer-events: none">
									<obs conceptId="164507" id="Ped1stLine"/>
									</div>
							</td>
					</tr>
				</table>
			</td>   
            <td>
				<table id="ped_second_line" class="table" width="100%">
					<tr>
								<td>
									<label>Pediatric 2nd Line Regimens</label>
									<div class="enable_disable_control" style="pointer-events: none">
									<obs conceptId="164514" id="Ped2ndLine"/>
									</div>
								</td>
					</tr>
				</table>
			</td>

			<td>
				<table  id="ped_salvage" class="table" width="100%">
							<tr>
								<td>
									<label>Pediatric 3rd Line Regimens</label>
									<div class="enable_disable_control" style="pointer-events: none">
									<obs conceptId="165703" id="Ped3rdLine"/>
									</div>
								</td>
							</tr>
				</table>
			</td>   
            </tr>
        </table>

        <table class="baseline-aligned">
            <tr>
                <td>
                    <label>Drugs</label>
                </td>
                <td>
                    <label>Strength</label>
                </td>
                <td>
                    <label>Dosage</label>
                </td>
                <td>
                    <label>Frequency</label>
                </td>
                <td>
                    <label>Duration (in days)</label>
                </td>
                <td>
                    <label>Qty Prescribed</label>
                </td>
                <includeIf velocityTest="$user.hasRole('Pharmacist')">
                    <td>
                        <label>Qty Dispensed</label>
                    </td>
                </includeIf>
            </tr>
            <tr>
                <obsgroup groupingConceptId="162240">
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165724" answerConceptIds="166043,164505,1652,161364,630,103166,75523,86663,159809,794,74258,83412,162796,165631,103166,80586,70056,154378,84309,74807,83690,80487,77995,75628,795" answerLabels="Tenofovir/Lamivudine/Dolutegravir,Tenofovir/Lamivudine/Efavirenz,Lamivudine/Zidovudine/Nevirapine,Tenofovir/Lamivudine,Lamivudine/Zidovudine,Abacavir/Lamivudine,Efavirenz,Zidovudine,Atazanavir/Ritonavir,Lopinavir/Ritonavir,Darunavir,Ritonavir,Darunavir/Ritonavir,Dolutegravir,Abacavir/Lamivudine,Nevirapine,Abacavir,Raltegravir,Stavudine,Didanosine,Saquinavir,Nelfinavir,Indinavir,Emtricitabine,Ritonavir"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165725" id="drugStrength"  />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="166120" size="1" id="arvdosage"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165723" class='frequency' answerConceptIds="160862,160858,165721,160870,165722" answerLabels="OD,BD,2 BD,QDS,3ce/week"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="159368" size="1" id="duration"/>
                        </div>
                    </td>
                    <td>
                        <div>
                            <obs conceptId="160856" size="1" id="qtyPrescribed"/>
                        </div>
                    </td>

                    <includeIf velocityTest="$user.hasRole('Pharmacist')">
                        <td>
                            <obs conceptId="1443" size="1" id="qtyDispensed"/>
                        </td>
                    </includeIf>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="162240">

                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165724" answerConceptIds="166043,164505,1652,161364,630,103166,75523,86663,159809,794,74258,83412,162796,165631,103166,80586,70056,154378,84309,74807,83690,80487,77995,75628,795" answerLabels="Tenofovir/Lamivudine/Dolutegravir,Tenofovir/Lamivudine/Efavirenz,Lamivudine/Zidovudine/Nevirapine,Tenofovir/Lamivudine,Lamivudine/Zidovudine,Abacavir/Lamivudine,Efavirenz,Zidovudine,Atazanavir/Ritonavir,Lopinavir/Ritonavir,Darunavir,Ritonavir,Darunavir/Ritonavir,Dolutegravir,Abacavir/Lamivudine,Nevirapine,Abacavir,Raltegravir,Stavudine,Didanosine,Saquinavir,Nelfinavir,Indinavir,Emtricitabine,Ritonavir"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165725" id="drugStrength"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="166120" size="1" id="arvdosage"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165723" class='frequency' answerConceptIds="160862,160858,165721,160870,165722" answerLabels="OD,BD,2 BD,QDS,3ce/week"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="159368" size="1" id="duration"/>
                        </div>
                    </td>
                    <td>
                        <div>
                            <obs conceptId="160856" size="1" id="qtyPrescribed"/>
                        </div>
                    </td>

                    <includeIf velocityTest="$user.hasRole('Pharmacist')">
                        <td>
                            <obs conceptId="1443" size="1" id="qtyDispensed"/>
                        </td>
                    </includeIf>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="162240">
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165724" answerConceptIds="166043,164505,1652,161364,630,103166,75523,86663,159809,794,74258,83412,162796,165631,103166,80586,70056,154378,84309,74807,83690,80487,77995,75628,795" answerLabels="Tenofovir/Lamivudine/Dolutegravir,Tenofovir/Lamivudine/Efavirenz,Lamivudine/Zidovudine/Nevirapine,Tenofovir/Lamivudine,Lamivudine/Zidovudine,Abacavir/Lamivudine,Efavirenz,Zidovudine,Atazanavir/Ritonavir,Lopinavir/Ritonavir,Darunavir,Ritonavir,Darunavir/Ritonavir,Dolutegravir,Abacavir/Lamivudine,Nevirapine,Abacavir,Raltegravir,Stavudine,Didanosine,Saquinavir,Nelfinavir,Indinavir,Emtricitabine,Ritonavir"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165725" id="drugStrength"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="166120" size="1" id="arvdosage"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165723" class='frequency' answerConceptIds="160862,160858,165721,160870,165722" answerLabels="OD,BD,2 BD,QDS,3ce/week"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="159368" size="1" id="duration"/>
                        </div>
                    </td>
                    <td>
                        <div>
                            <obs conceptId="160856" size="1" id="qtyPrescribed"/>
                        </div>
                    </td>

                    <includeIf velocityTest="$user.hasRole('Pharmacist')">
                        <td>
                            <obs conceptId="1443" size="1" id="qtyDispensed"/>
                        </td>
                    </includeIf>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="162240">
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165724" answerConceptIds="166043,164505,1652,161364,630,103166,75523,86663,159809,794,74258,83412,162796,165631,103166,80586,70056,154378,84309,74807,83690,80487,77995,75628,795" answerLabels="Tenofovir/Lamivudine/Dolutegravir,Tenofovir/Lamivudine/Efavirenz,Lamivudine/Zidovudine/Nevirapine,Tenofovir/Lamivudine,Lamivudine/Zidovudine,Abacavir/Lamivudine,Efavirenz,Zidovudine,Atazanavir/Ritonavir,Lopinavir/Ritonavir,Darunavir,Ritonavir,Darunavir/Ritonavir,Dolutegravir,Abacavir/Lamivudine,Nevirapine,Abacavir,Raltegravir,Stavudine,Didanosine,Saquinavir,Nelfinavir,Indinavir,Emtricitabine,Ritonavir"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165725" id="drugStrength"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="166120" size="1" id="arvdosage"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165723" class='frequency' answerConceptIds="160862,160858,165721,160870,165722" answerLabels="OD,BD,2 BD,QDS,3ce/week"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="159368" size="1" id="duration"/>
                        </div>
                    </td>
                    <td>
                        <div>
                            <obs conceptId="160856" size="1" id="qtyPrescribed"/>
                        </div>
                    </td>

                    <includeIf velocityTest="$user.hasRole('Pharmacist')">
                        <td>
                            <obs conceptId="1443" size="1" id="qtyDispensed"/>
                        </td>
                    </includeIf>
                </obsgroup>
            </tr>
        </table>
    </fieldset>

    <fieldset>
        <legend class="legend_style">Drugs for OI Prophylaxis/Treatment</legend>
        <table class="baseline-aligned">
            <tr>
                <td>
                    <label>Drugs</label>
                </td>
                <td>
                    <label>Strength</label>
                </td>
                <td>
                    <label>Frequency</label>
                </td>
                <td>
                    <label>Duration (in days)</label>
                </td>
                <td>
                    <label>Qty Prescribed</label>
                </td>
                <includeIf velocityTest="$user.hasRole('Pharmacist')">
                    <td>
                        <label>Qty Dispensed</label>
                    </td>
                </includeIf>
            </tr>
            <tr>
                <obsgroup groupingConceptId="165726">
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165727" answerConceptIds="165257,76488,656,80945" answerLabels="Cotrimoxazole,Fluconazole,Isoniazid,Nystatin" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165725" answerConceptIds="166050,166137,165068,165060,165062" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165723" class='frequency' answerConceptIds="160862,160858,160870" answerLabels="OD,BD,QDS" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="159368" id="duration" />
                        </div>
                    </td>
                    <td>
                        <div>
                            <obs conceptId="160856" id="qtyPrescribed" />
                        </div>
                    </td>

                    <includeIf velocityTest="$user.hasRole('Pharmacist')">
                        <td>
                            <obs conceptId="1443" id="qtyDispensed" />
                        </td>
                    </includeIf>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="165726">
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165727" answerConceptIds="70245,450,76488,80945,85151,71780,159587,73041,73449,75222,75842,76488,166059,81022,84221,84893,
							931,1447,76613,256,77714,461,77897,79037,82667,85276,924,165257,656" answerLabels="Acyclovir 200mg tab,Clavulanate pot. Amoxycillin 625mg tab,Fluconazole 50mg cap/tab,Nystatin 100000iu/ml susp,Tinidazole 500mg tab,Azithromycin 500mg cap,Benzathine penicillin 1gm inj,Ceftriaxone 1gm inj,Ciprofloxacin 500mg tab,Doxycycline 100mg cap,Erythromycin 500mg tab,
							Fluconazole 100mg,Oral Nystatin,Ofloxacin 200mg tab,Spectinomycin 1gm inj,Tetracycline 500mg cap,Amitryptiline 25mg tab,Arthemeter 20mg + Lumefantrine 120mg,Folic Acid tab,Ferrous Sulphate tab,Hydrocortizone,Multivitamin tab,Ibuprofen 200mg,Loperamide 2mg,Promethazine HCL 25mg,Tramadol HCL 50mg,
							Sulfadoxine/Pyrimethamine 500mg/25mg,Cotrimoxazole,Isoniazid Prophylaxis" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165725" answerConceptIds="165617,165076,165075,165635" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165723" class='frequency' answerConceptIds="160862,160858,160870" answerLabels="OD,BD,QDS" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="159368" id="duration" />
                        </div>
                    </td>
                    <td>
                        <div>
                            <obs conceptId="160856" id="qtyPrescribed" />
                        </div>
                    </td>

                    <includeIf velocityTest="$user.hasRole('Pharmacist')">
                        <td>
                            <obs conceptId="1443" id="qtyDispensed" />
                        </td>
                    </includeIf>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="165726">
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165727" answerConceptIds="70245,450,76488,80945,85151,71780,159587,73041,73449,75222,75842,76488,166059,81022,84221,84893,
							931,1447,76613,256,77714,461,77897,79037,82667,85276,924,165257,656" answerLabels="Acyclovir 200mg tab,Clavulanate pot. Amoxycillin 625mg tab,Fluconazole 50mg cap/tab,Nystatin 100000iu/ml susp,Tinidazole 500mg tab,Azithromycin 500mg cap,Benzathine penicillin 1gm inj,Ceftriaxone 1gm inj,Ciprofloxacin 500mg tab,Doxycycline 100mg cap,Erythromycin 500mg tab,
							Fluconazole 100mg,Oral Nystatin,Ofloxacin 200mg tab,Spectinomycin 1gm inj,Tetracycline 500mg cap,Amitryptiline 25mg tab,Arthemeter 20mg + Lumefantrine 120mg,Folic Acid tab,Ferrous Sulphate tab,Hydrocortizone,Multivitamin tab,Ibuprofen 200mg,Loperamide 2mg,Promethazine HCL 25mg,Tramadol HCL 50mg,
							Sulfadoxine/Pyrimethamine 500mg/25mg,Cotrimoxazole,Isoniazid Prophylaxis" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165725" answerConceptIds="165617,165076,165074" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165723" class='frequency' answerConceptIds="160862,160858,160870" answerLabels="OD,BD,QDS" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="159368" id="duration" />
                        </div>
                    </td>
                    <td>
                        <div>
                            <obs conceptId="160856" id="qtyPrescribed" />
                        </div>
                    </td>

                    <includeIf velocityTest="$user.hasRole('Pharmacist')">
                        <td>
                            <obs conceptId="1443" id="qtyDispensed" />
                        </td>
                    </includeIf>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="165726">
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165727" answerConceptIds="70245,450,76488,80945,85151,71780,159587,73041,73449,75222,75842,76488,166059,81022,84221,84893,
							931,1447,76613,256,77714,461,77897,79037,82667,85276,924,165257,656" answerLabels="Acyclovir 200mg tab,Clavulanate pot. Amoxycillin 625mg tab,Fluconazole 50mg cap/tab,Nystatin 100000iu/ml susp,Tinidazole 500mg tab,Azithromycin 500mg cap,Benzathine penicillin 1gm inj,Ceftriaxone 1gm inj,Ciprofloxacin 500mg tab,Doxycycline 100mg cap,Erythromycin 500mg tab,
							Fluconazole 100mg,Oral Nystatin,Ofloxacin 200mg tab,Spectinomycin 1gm inj,Tetracycline 500mg cap,Amitryptiline 25mg tab,Arthemeter 20mg + Lumefantrine 120mg,Folic Acid tab,Ferrous Sulphate tab,Hydrocortizone,Multivitamin tab,Ibuprofen 200mg,Loperamide 2mg,Promethazine HCL 25mg,Tramadol HCL 50mg,
							Sulfadoxine/Pyrimethamine 500mg/25mg,Cotrimoxazole,Isoniazid Prophylaxis" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165725" answerConceptIds="166145,166146,166147" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165723" class='frequency' answerConceptIds="160862,160858,160870" answerLabels="OD,BD,QDS" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="159368" id="duration" />
                        </div>
                    </td>
                    <td>
                        <div>
                            <obs conceptId="160856" id="qtyPrescribed" />
                        </div>
                    </td>

                    <includeIf velocityTest="$user.hasRole('Pharmacist')">
                        <td>
                            <obs conceptId="1443" id="qtyDispensed" />
                        </td>
                    </includeIf>
                </obsgroup>
            </tr>

        </table>
    </fieldset>
    <br/>

    <fieldset>
        <legend class="legend_style">Anti-TB Drugs</legend>
        <table class="baseline-aligned">
            <tr>
                <td>
                    <label>Drugs</label>

                </td>
                <td>
                    <label>Strength</label>
                </td>
                <td>
                    <label>Frequency</label>
                </td>
                <td>
                    <label>Duration (in days)</label>
                </td>
                <td>
                    <label>Qty Prescribed</label>
                </td>
                <includeIf velocityTest="$user.hasRole('Pharmacist')">
                    <td>
                        <label>Qty Dispensed</label>
                    </td>
                </includeIf>
            </tr>
            <tr>
                <obsgroup groupingConceptId="165728">
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165304" answerConceptIds="1675,768,1677,1108" answerLabels="RHZE,RHZ,RHE,EH"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165725" answerConceptIds="162401"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165723" class='frequency'/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="159368" id="duration"/>
                        </div>
                    </td>
                    <td>
                        <div>
                            <obs conceptId="160856" id="qtyPrescribed"/>
                        </div>
                    </td>

                    <includeIf velocityTest="$user.hasRole('Pharmacist')">
                        <td>
                            <obs conceptId="1443" id="qtyDispensed"/>
                        </td>
                    </includeIf>
                </obsgroup>
            </tr>
            <tr>
                <obsgroup groupingConceptId="165728">
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165304" answerConceptIds="83352,1679,767,82900,75948" answerLabels="Rifabutin,Isoniazid,Rifampicin,Pyrazinamide,Ethambutol" />
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165725" answerConceptIds="165075"/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="165723" class='frequency'/>
                        </div>
                    </td>
                    <td>
                        <div class="enable_disable_control" style="pointer-events: none">
                            <obs conceptId="159368" id="duration"/>
                        </div>
                    </td>
                    <td>
                        <div>
                            <obs conceptId="160856" id="qtyPrescribed"/>
                        </div>
                    </td>
                    <includeIf velocityTest="$user.hasRole('Pharmacist')">
                        <td>
                            <obs conceptId="1443" id="qtyDispensed"/>
                        </td>
                    </includeIf>
                </obsgroup>
            </tr>
        </table>
    </fieldset>

    <fieldset>

        <legend class="legend_style">Other Drugs</legend>

              <table class="baseline-aligned">
      <tr>
          <td>
              <label>Drugs</label>
          </td>
          <td>
              <label>Strength</label>
          </td>
          <td>
              <label>Frequency</label>
          </td>
          <td>
              <label>Duration (in days)</label>
          </td>
          <td>
              <label>Qty Prescribed</label>
          </td>
          <includeIf velocityTest="$user.hasRole('Pharmacist')">
            <td>
                <label>Qty Dispensed</label>
            </td>
        </includeIf>
      </tr>
      <tr>
          <obsgroup groupingConceptId="166060">
              <td>
                <div class="enable_disable_control" style="pointer-events: none">
                  <obs conceptId="163101" />
                </div>
              </td>
              <td>
                <div class="enable_disable_control" style="pointer-events: none">
                  <obs conceptId="165641" />
                                         <!--<obs conceptId="165725" answerConceptIds="162401"/>-->
                </div>
              </td>
              <td>
                <div class="enable_disable_control" style="pointer-events: none">
                   <obs conceptId="165723" answerConceptIds="160862,160858,165721,166056,166057,160870,165722,166058,5622" answerLabels="OD,BD,2 BD,3 BD,4 BD,QDS,3ce/week,Nocte,Others"/>
                </div>
              </td>
              <td>
                <div class="enable_disable_control" style="pointer-events: none">
                   <obs conceptId="159368" id="duration"/>
                   </div>
              </td>
              <td>
                  <obs conceptId="160856" id="qtyPrescribed"/>
              </td>
              <includeIf velocityTest="$user.hasRole('Pharmacist')">
              <td>
                  <obs conceptId="1443" id="qtyDispensed"/>
              </td>
              </includeIf>
          </obsgroup>
      </tr>
      <tr>
        <obsgroup groupingConceptId="166060">
            <td>
              <div class="enable_disable_control" style="pointer-events: none">
                <obs conceptId="163101" />
              </div>
            </td>
            <td>
              <div class="enable_disable_control" style="pointer-events: none">
                <obs conceptId="165641" />
                                       <!--<obs conceptId="165725" answerConceptIds="162401"/>-->
              </div>
            </td>
            <td>
              <div class="enable_disable_control" style="pointer-events: none">
                 <obs conceptId="165723" answerConceptIds="160862,160858,165721,166056,166057,160870,165722,166058,5622" answerLabels="OD,BD,2 BD,3 BD,4 BD,QDS,3ce/week,Nocte,Others"/>
              </div>
            </td>
            <td>
              <div class="enable_disable_control" style="pointer-events: none">
                 <obs conceptId="159368" id="duration"/>
                 </div>
            </td>
            <td>
                <obs conceptId="160856" id="qtyPrescribed"/>
            </td>
            <includeIf velocityTest="$user.hasRole('Pharmacist')">
            <td>
                <obs conceptId="1443" id="qtyDispensed"/>
            </td>
            </includeIf>
        </obsgroup>
    </tr>
    <tr>
        <obsgroup groupingConceptId="166060">
            <td>
              <div class="enable_disable_control" style="pointer-events: none">
                <obs conceptId="163101" />
              </div>
            </td>
            <td>
              <div class="enable_disable_control" style="pointer-events: none">
                <obs conceptId="165641" />
                                       <!--<obs conceptId="165725" answerConceptIds="162401"/>-->
              </div>
            </td>
            <td>
              <div class="enable_disable_control" style="pointer-events: none">
                 <obs conceptId="165723" answerConceptIds="160862,160858,165721,166056,166057,160870,165722,166058,5622" answerLabels="OD,BD,2 BD,3 BD,4 BD,QDS,3ce/week,Nocte,Others"/>
              </div>
            </td>
            <td>
              <div class="enable_disable_control" style="pointer-events: none">
                 <obs conceptId="159368" id="duration"/>
                 </div>
            </td>
            <td>
                <obs conceptId="160856" id="qtyPrescribed"/>
            </td>
            <includeIf velocityTest="$user.hasRole('Pharmacist')">
            <td>
                <obs conceptId="1443" id="qtyDispensed"/>
            </td>
            </includeIf>
        </obsgroup>
    </tr>
               </table>
</fieldset>


    <fieldset>
        <legend class="legend_style">Signature</legend>
        <table>
            <tr>
                <td>
                    <label>Ordered By:</label>
                    <encounterProvider role="Clinician" default="currentUser" required="true" />
                </td>
                <td>
                    <label>Date orderd:</label>
                    <obs conceptId="164989" id="dateDrugOrdered" required="true"/>
                </td>
                <includeIf velocityTest="$user.hasRole('Pharmacist')">
                    <td>
                        <label>Dispensed By:</label>
                        <encounterProvider role="Pharmacist" />
                    </td>
                    <td>
                        <label>Date dispensed:</label>
                        <obs conceptId="164989" id="dateDrugOrdered" required="true"/>
                    </td>
                </includeIf>
            </tr>
        </table>
    </fieldset>


    <br/>

    <fieldset>
<includeIf velocityTest="$user.hasRole('Pharmacist')">
        <th>Feedback from the Pharmacist in case of any observed medication error </th>
</includeIf>
        <table class="baseline-aligned">
            <br/>
<includeIf velocityTest="$user.hasRole('Pharmacist')">
            <tr>
                <td>
                    <label>Name of the drug(s):</label>
                </td>
                <td colspan="3">
                    <obs conceptId="164996" id="nameDrugError"/>
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    <label>Nature of ARV medication error(s):</label>
                </td>
                <td colspan="3">
                    <obs conceptId="165827" id="nameDrugError"/>
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    <label>Consequence(s) of the error:</label>
                </td>
                <td colspan="3">
                    <obs conceptId="165828" id="nameDrugError"/>
                </td>
                <td></td>
            </tr>
</includeIf>
            <tr>
                <td>
                    <label>Signature:</label>
                </td>
                <td colspan="3">
                    <encounterProvider role="Privilege Level: Full" default="currentUser" />
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    <label>Date:</label>
                </td>
                <td colspan="3">
                    <encounterDate default="today"/>
                </td>
                <td></td>
            </tr>
        </table>
    </fieldset>

    <ifMode mode="VIEW" include="false">
        <div id="buttons">
            <submit submitClass="confirm right" submitCode="general.save" />
            <button type="button" class="cancel">
                <uimessage code="general.cancel" />
            </button>
        </div>
    </ifMode>

    <includeIf velocityTest="$user.hasRole('Clinician')">
        <script>
            var items = document.getElementsByClassName("enable_disable_control");
            for(var i=0; i &lt; items.length; i++){
               items[i].style.pointerEvents = "unset";
            }
        </script>
    </includeIf>

</htmlform>