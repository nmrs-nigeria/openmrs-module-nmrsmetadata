<htmlform formUuid="365f808f-d875-4f89-88fb-7d31680b906a" formName="OVC Linkage Form" formEncounterType="d3ac6e1d-8374-4bf8-9b40-9c1eac392a7d" formVersion="1.0">
    <style>
        .section {
            border: 1px solid $headerColor;
        padding: 2px;
        text-align: left;
        margin-bottom: 1em;
        }

        .sectionHeader {
            background - color: #2f1c55;
        color: white;
        /* display: block; */
        padding: 2px;
        font-weight: bold;
        }

        table tr:nth-child(even) {
            background: #ffffff;
        }

        .alnright {
            text - align: right;
        color: #000000;
        width: 25%;
        }

        .alnright_s {
            text - align: right;
        color: #000000;
        width: 13%;
        }

        .alnleft_s {
            text - align: left;
        color: #000000;
        width: 13%;
        }

        .alnleft_j {
            text - align: left;
        color: #000000;
        width: 20%;
        }

        .alnleft {
            text - align: left;
        color: #000000;8
        width: 25%;
        }

        .error {
            color: red;
        }

        td {
            border: none;
        }

        table th, table td {
            padding: 5px 10px;
        border: None;
        }

        .legend_style {
            max - width: 35%;
        background: #FAFAFA;
        <!-- padding: 5px; -->
        margin: 0px left;
        box-shadow: 1px 1px 25px rgba(0,0,0,0.10);
        border-radius: 2px;
        border: 1px solid #305a72;
        border-bottom-left-radius: 2px;
        text-transform: initial;
        }

        form fieldset, .form fieldset {
            min - width: 98%;
        border: none;
        border-top: 1px solid #305a72;
        padding: 10px 0px;
        }

        table th, table td {
            padding: 5px 10px;
            /* border: 1px solid #DDD; */
        }

        table tr {
            border: None;
        }

        ul.select, .form input, .form select, .form textarea, .form ul.select {
            padding: 2px 10px;
        }

        form input, form select, form textarea, form ul.select, .form input, .form select, .form textarea, .form
        ul.select {
            padding: 2px 10px;
        }

        form select, .form select {
            max - width: 150px;
        min-width: 100px;
        }

        body {
            font - family: "OpenSans", Arial, sans-serif;
        color: #363463;
        font-size: 14px;
        }

        .alnVertical {
            vertical - align: top;
        }
        .td_overwrote {
            border: 1px solid black;
        }

        .new {
            font - size: 15px;
        font-weight: 100;
        background-color: #2f1157;
        color:#ffffff;
        border: 0px solid; float:none; align-content: center; clear-;
        margin: 0px auto;
        }

        */

    </style>

    <script type="text/javascript">
        console.log('rett23');

      

        var $ = jQuery;
        console.log('rett');
        $(document).ready(function () {
            console.log('testing');
        // check  and validate each phone number character as they are entered and either show or hide the prompt
        document.querySelector('#phoneval1').children[0].addEventListener('keyup', function(e) {
            e.preventDefault();
        console.log('testing prior');
        let phone = document.querySelector('#phoneval1').children[0].value;
        if (!validatePhoneNumber(phone))
        getField('phoneval1.error').html('REMINDER: Please, ensure you enter a valid 11 digits phone number').show();

        else
        getField('phoneval1.error').html('REMINDER: Please, ensure you enter a valid 11 digits phone number').hide();
        });

        console.log('testing1');

        
            function validatePhoneNumber(input_str) {
                let regPattern = /^(0)(7|8|9){1}(0|1){1}([0-9]{8})$/;
                return regPattern.test(input_str);
            }

        console.log('finalreview');

    });

    </script>

    <table style="margin-bottom: 20px;">
        <thead>
            <tr>
                <th style="text-align: center">OVC Linkage Form</th>
            </tr>
        </thead>


    </table>



    <!-- <fieldset style="border: 1px solid #305a72; min-width: 90%; margin-left:5%; padding: 6px; margin-bottom: 2%; border-radius: 9px;">
        <legend class="legend_style">Summary of Last Visit</legend>
        <table id="dashboard" cellspacing="10" cellpadding="5" align="center">

            <tr>
                <td><b>Last Call Session:</b><font color='blue' style="font-weight: bold"><lookup expression="fn.latestObs('162189').valueCoded.name" /></font></td>

                <td><b>Missed Doses:</b><font color='blue' style="font-weight: bold"><lookup expression="fn.latestObs(166362).ValueCoded.name" /></font></td>

            </tr>
            <tr>
                <td><b>Wellbeing at Last Session:</b><font color='blue' style="font-weight: bold"><lookup expression="fn.latestObs('159640').valueCoded.name" /></font> </td>
                <td><b>Last Call Outcome:</b><font color='blue' style="font-weight: bold"><lookup expression="fn.latestObs('160433').valueCoded.name" /></font></td>

            </tr>
        </table>
    </fieldset> -->

    <fieldset>
        <br />
        <table>
            <tr>
                <td class="alnleft" width="25%">Entry Point</td>
                <td style="float: left">

                    <!-- There was no suitable conceptId, so i created one "Missed Medication" (166254) -->

                    <obs id="missed_med1" conceptId="166362" answerConceptIds="1065,1066" answerLabels="Community,Facility" required="true">
                        <controls>
                            <when value="1065" thenDisplay="#yes1" />
                            <when value="1066" thenDisplay="#yes2" />
                        </controls>
                    </obs>
                </td>

            </tr>

            <tr id="yes2">
                <td class="alnleft" style="float: left; margin-top: 5px"> Enrolled into the OVC program </td>
                <td><obs conceptId="166362" answerConceptIds="1065,1066" answerLabels="Yes,No" /></td>
            </tr>
            <tr id="yes1">
                <td class="alnleft" style="float: left; margin-top: 5px"> Date of Enrolment </td>
                <td><obs conceptId="162502" /></td>
                <td class="alnleft" width="25%"> OVC ID </td>
                <td>
                    <obs conceptId="163101" width="25%"/>
                </td>
                <td class="alnleft" width="25%"> HH ID </td>
                <td>
                    <obs conceptId="163101" />
                </td>
            </tr>


        </table>
    </fieldset>
    <br />
    <br />
    <!--Call Sessions-->
    <fieldset>
        <table>
            <tr>
                <td class="alnleft" width="25%">Select partner CBO</td>
                <td width="25%">
                    <obs conceptId="159640" labelText="" answerConceptIds="159405,159406,159407" answerLabels="Rosita Unique Care Foundation (RUCF),Justice and Peace Development Caritas (JDPC Orlu),Peoples Health Economic Development and Enhancement Centre PHEDEC" required="true" />
                </td>
            </tr>
            <tr>
                <td class="alnleft" width="25%" >Should I share your contact/address with the selected CBO for possible enrolment on the OVC program</td>
                <td style="float: left">

                    <!-- There was no suitable conceptId, so i created one "Missed Medication" (166254) -->

                    <obs id="missed_med" conceptId="162189" answerConceptIds="1065,1066" answerLabels="Yes,No" required="true">
                        <controls>
                            <when value="1066" thenDisplay="#ys1, #ysss" />
                        </controls>
                    </obs>
                </td>
            </tr>

            <tr id="ys1">
                <td class="alnleft">Reason for decline</td>
                <td colspan="3" class="alnleft">
                    <obs conceptId="165579" style="textarea" rows="2" />
                </td>
            </tr>

            <tr id="ysss">
                <td class="alnleft" width="25%">Would you like to receive reminders from the OVC Program Partner for drug refills and viral load tests</td>
                <td >
                    <obs id="reminder" conceptId="160433" answerConceptIds="1065,1066" answerLabels="Yes,No" >
                        <controls>
                            <when value="1065" thenDisplay="#yess" />
                        </controls>
                    </obs>
                </td>
                <td>
                    <table id="yess">
                        <tr>
                            <td class="alnleft">
                                Phone No.</td>
                            <td>
                                <obs id="phoneval1" conceptId="165487" />
                            </td>
                            <td></td>
                            <td></td>
                        </tr>
                    </table>
                </td>
            </tr>
            <br />
        </table>

    </fieldset>

    <fieldset>
        <legend class="legend_style">Signature</legend>
        <table>
            <tr>
                <td class="alnleft_s">Name of Caregiver</td>
                <td class="alnleft_s"><obs conceptId="161103" required="true" /></td>
                <td class="alnleft_s"> Date  </td>
                <td class="alnleft_s"><obs conceptId="163181" allowTime="false" allowFutureDates="false" /></td>
                <TD></TD>
            </tr>
            <tr>

                <td class="alnleft_s">Name of Facility staff:</td>
                <td class="alnleft_s"> <encounterProviderAndRole default="currentUser" encounterRole="240b26f9-dd88-4172-823d-4a8bfeb7841f" /></td>
                <td class="alnleft_s">Facility:</td>
                <td class="alnleft_s">
                    <encounterLocation default="SessionAttribute:emrContext.sessionLocationId" />
                </td>

                <td class="alnleft_s">Date documented at facility</td>

                <td class="alnleft_s">
                    <encounterDate showTime="false" allowFutureDates="false" required="true" />
                </td>
            </tr>

        </table>
    </fieldset>

    <ifMode mode="VIEW" include="false">
        <div id="buttons">
            <submit submitClass="confirm right" submitCode="general.save" />
            <button type="button" class="cancel">
                <uimessage code="general.cancel" />
            </button>
        </div>
    </ifMode>

</htmlform>